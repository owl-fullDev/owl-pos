(function(t){function e(e){for(var s,n,o=e[0],l=e[1],c=e[2],d=0,m=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&m.push(r[n][0]),r[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(m.length)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==r[l]&&(s=!1)}s&&(i.splice(e--,1),t=n(n.s=a[0]))}return t}var s={},r={app:0},i=[];function n(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=s,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0396":function(t,e,a){"use strict";a("496c")},"0ed3":function(t,e,a){"use strict";a("992e")},"3fb4":function(t,e,a){"use strict";a("c7ee")},"496c":function(t,e,a){},"4edb":function(t,e,a){"use strict";a("592f")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light"},[a("div",{staticClass:"container-fluid"},[a("span",{staticClass:"navbar-brand mb-0 h1"},[t._v("Owl")]),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[a("ul",{staticClass:"navbar-nav me-auto mb-2 mb-lg-0"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/pendingSales","active-class":"nav-link"}},[t._v(" Penjualan Pending ")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/salesForm","active-class":"nav-link"}},[t._v(" POS ")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/Employees","active-class":"nav-link"}},[t._v(" Karyawan ")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/refunds","active-class":"nav-link"}},[t._v(" Refunds ")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/StoreInventory","active-class":"nav-link"}},[t._v(" Store Inventory ")])],1),a("li",{staticClass:"nav-item dropdown"},[a("span",{staticClass:"nav-link dropdown-toggle",attrs:{id:"salesDropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(" Kiriman ")]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"salesDropdown"}},[a("router-link",{staticClass:"dropdown-item",attrs:{to:"/shipments/ReceiveShipments"}},[t._v(" Terima Kiriman ")]),a("router-link",{staticClass:"dropdown-item",attrs:{to:"/shipments/CreateShipments"}},[t._v(" Buat Kiriman ")])],1)])])])])]),a("router-view")],1)},i=[],n=a("2877"),o={},l=Object(n["a"])(o,r,i,!1,null,null,null),c=l.exports,u=a("8c4f"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid mt-2"},[t.loading?a("div",{staticClass:"d-flex justify-content-center",attrs:{id:"overlay"}},[t._m(0)]):t._e(),a("form",{staticClass:"mt-3",attrs:{id:"saleForm"}},[a("h3",[t._v("Data Customer")]),a("hr"),a("customer-list",{directives:[{name:"show",rawName:"v-show",value:!t.createNewCustomer,expression:"!createNewCustomer"}],attrs:{list:t.customerList,"selected-customer-id":t.selectedCustomerId},on:{selectCustomer:t.setCustomerInfo}}),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col-6"},[a("div",{staticClass:"mb-3 row"},[a("div",{staticClass:"col"},[a("label",{staticClass:"form-label",attrs:{for:"CustomerName"}},[t._v(" Nama Depan ")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.firstName,expression:"firstName",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"firstName",required:""},domProps:{value:t.firstName},on:{input:function(e){e.target.composing||(t.firstName=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),a("div",{staticClass:"mb-3 row"},[a("div",{staticClass:"col"},[a("label",{staticClass:"form-label",attrs:{for:"CustomerName"}},[t._v(" Nama Belakang ")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.lastName,expression:"lastName",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"lastName",required:""},domProps:{value:t.lastName},on:{input:function(e){e.target.composing||(t.lastName=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),a("div",{staticClass:"mb-3 row"},[a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-primary mr-5",attrs:{type:"button",disabled:t.loading},on:{click:t.searchCustomerByName}},[t._v(" Cari Customer Menggunakan Nama ")]),a("div",{staticClass:"form-check d-inline-block"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.createNewCustomer,expression:"createNewCustomer"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"createNewCustomer",id:"createNewCustomer",disabled:t.loading},domProps:{checked:Array.isArray(t.createNewCustomer)?t._i(t.createNewCustomer,null)>-1:t.createNewCustomer},on:{click:t.resetCustomerInfo,change:function(e){var a=t.createNewCustomer,s=e.target,r=!!s.checked;if(Array.isArray(a)){var i=null,n=t._i(a,i);s.checked?n<0&&(t.createNewCustomer=a.concat([i])):n>-1&&(t.createNewCustomer=a.slice(0,n).concat(a.slice(n+1)))}else t.createNewCustomer=r}}}),a("label",{staticClass:"form-check-label",attrs:{for:"createNewCustomer"}},[t._v(" Customer Baru ")])])])]),a("div",{staticClass:"mb-3 row"},[a("div",{staticClass:"col"},[a("label",{staticClass:"form-label",attrs:{for:"CustomerPhone"}},[t._v(" Nomor Telepon ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneNum,expression:"phoneNum"}],staticClass:"form-control",attrs:{type:"text",name:"phoneNumber",required:""},domProps:{value:t.phoneNum},on:{input:function(e){e.target.composing||(t.phoneNum=e.target.value)}}})])]),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-primary mr-5",attrs:{type:"button",disabled:t.loading},on:{click:t.searchCustomerByPhone}},[t._v(" Cari Menggunakan Nomor Telepon ")])])]),t.showCustomerInfo?a("div",[a("div",{staticClass:"mb-3 row"},[a("div",{staticClass:"col"},[a("label",{staticClass:"form-label",attrs:{for:"CustomerEmail"}},[t._v(" Email ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",name:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])])]):t._e()])]),a("Prescription",{ref:"prescriptionElem",attrs:{"show-prescription":t.showCustomerInfo}}),a("br"),a("br"),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("h3",[t._v("Informasi Barang")]),a("hr"),a("div",{staticClass:"row",class:{"d-none":t.productIds.frames.length<1}},[t._m(1)]),t._l(t.productIds.frames,(function(e,s){return a("div",{key:e.id,staticClass:"mb-3 row"},[a("div",{staticClass:"col"},[a("label",{staticClass:"form-label",attrs:{for:"ProductId"}},[t._v("Barcode Frame")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.productId,expression:"product.productId",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":e.barcodeError&&null!=e.barcodeError,"is-valid":null===e.barcodeError},attrs:{type:"text","aria-label":"Product","aria-describedby":"productId",required:""},domProps:{value:e.productId},on:{change:function(e){return t.validateBarcodeInput(s,"frame")},input:function(a){a.target.composing||t.$set(e,"productId",a.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("small",{staticClass:"form-text text-danger"},[t._v(" "+t._s(e.barcodeError)+" ")])]),a("div",{staticClass:"col"},[a("label",{staticClass:"form-label",attrs:{for:"Quantity"}},[t._v("Kuantitas")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.quantity,expression:"product.quantity",modifiers:{number:!0}}],staticClass:"form-control",class:{"is-invalid":e.quantityError&&null!=e.quantityError,"is-valid":null===e.quantityError},attrs:{type:"number","aria-label":"ProductQuantity","aria-describedby":"productQuantity",min:"1",max:e.availableAmt,disabled:e.barcodeError||!e.productId},domProps:{value:e.quantity},on:{change:function(e){return t.validateInputQuantity(s,"frame")},input:function(a){a.target.composing||t.$set(e,"quantity",t._n(a.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("small",{staticClass:"form-text text-danger"},[t._v(" "+t._s(e.quantityError)+" ")])]),a("div",{staticClass:"col-2"},[a("label",{staticClass:"form-label",attrs:{for:"Remove Product"}},[t._v(" Batalkan Frame ")]),a("button",{staticClass:"btn btn-danger form-control",attrs:{type:"button"},on:{click:function(e){return t.removeFrameInput(s)}}},[a("svg",{staticClass:"bi bi-dash-circle-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1h-7z"}})])])])])})),a("div",{staticClass:"row",class:{"d-none":t.productIds.lenses.length<1}},[t._m(2)]),t._l(t.productIds.lenses,(function(e,s){return a("div",{key:e.id,staticClass:"mb-3 row"},[a("div",{staticClass:"col"},[a("label",{staticClass:"form-label",attrs:{for:"ProductId"}},[t._v("Lens Barcode")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.productId,expression:"product.productId",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":e.barcodeError&&null!=e.barcodeError,"is-valid":null===e.barcodeError},attrs:{type:"text","aria-label":"Product","aria-describedby":"productId",required:""},domProps:{value:e.productId},on:{change:function(e){return t.validateBarcodeInput(s,"lens")},input:function(a){a.target.composing||t.$set(e,"productId",a.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("small",{staticClass:"form-text text-danger"},[t._v(" "+t._s(e.barcodeError)+" ")])]),a("div",{staticClass:"col"},[a("label",{staticClass:"form-label",attrs:{for:"Quantity"}},[t._v("Kuantitas")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.quantity,expression:"product.quantity",modifiers:{number:!0}}],staticClass:"form-control",class:{"is-invalid":e.quantityError&&null!=e.quantityError,"is-valid":null===e.quantityError},attrs:{type:"number","aria-label":"ProductQuantity","aria-describedby":"productQuantity",min:"1",max:e.availableAmt,disabled:e.barcodeError||!e.productId},domProps:{value:e.quantity},on:{change:function(e){return t.validateInputQuantity(s,"lens")},input:function(a){a.target.composing||t.$set(e,"quantity",t._n(a.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("small",{staticClass:"form-text text-danger"},[t._v(" "+t._s(e.quantityError)+" ")])]),a("div",{staticClass:"col-2"},[a("label",{staticClass:"form-label",attrs:{for:"Remove Product"}},[t._v(" Batalkan Lensa ")]),a("button",{staticClass:"btn btn-danger form-control",attrs:{type:"button"},on:{click:function(e){return t.removeStockLensInput(s)}}},[a("svg",{staticClass:"bi bi-dash-circle-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1h-7z"}})])])])])})),a("div",{staticClass:"row",class:{"d-none":t.productIds.customLenses.length<1}},[t._m(3)]),t._l(t.productIds.customLenses,(function(e,s){return a("div",{key:e.id,staticClass:"mb-3 row"},[a("div",{staticClass:"col"},[a("label",{staticClass:"form-label",attrs:{for:"productId"}},[t._v("Custom Lens")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.productId,expression:"product.productId"}],staticClass:"form-control",on:{change:[function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"productId",a.target.multiple?s:s[0])},function(e){return t.setLensDetails(s)}]}},[a("option",{attrs:{selected:"",disabled:"",value:""}},[t._v("Pilih Lensa Custom")]),t._l(t.customLenses,(function(e){return a("option",{key:e.id,domProps:{value:e.productId}},[t._v(" "+t._s(e.productName)+" ")])}))],2)]),a("div",{staticClass:"col"},[a("label",{staticClass:"form-label",attrs:{for:"Quantity"}},[t._v("Kuantitas")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.quantity,expression:"product.quantity",modifiers:{number:!0}}],staticClass:"form-control",class:{"is-invalid":e.error&&null!=e.error,"is-valid":null===e.error},attrs:{type:"number","aria-label":"ProductQuantity","aria-describedby":"productQuantity",min:"1",max:e.availableAmt,disabled:!e.productId},domProps:{value:e.quantity},on:{change:function(e){return t.validateInputQuantity(s,"customLens")},input:function(a){a.target.composing||t.$set(e,"quantity",t._n(a.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("small",{staticClass:"form-text text-danger"},[t._v(" "+t._s(e.error)+" ")])]),a("div",{staticClass:"col-2"},[a("label",{staticClass:"form-label",attrs:{for:"Remove Product"}},[t._v(" Batalkan Lensa Custom ")]),a("button",{staticClass:"btn btn-danger form-control",attrs:{type:"button"},on:{click:function(e){return t.removeCustomLensInput(s)}}},[a("svg",{staticClass:"bi bi-dash-circle-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1h-7z"}})])])])])})),a("div",{staticClass:"mb3 row"},[a("div",{staticClass:"col d-flex justify-content-center"},[a("button",{staticClass:"btn btn-primary mr-2",attrs:{type:"button"},on:{click:function(e){return t.addBarcodeInput("frame")}}},[t._v(" Tambah Frame "),a("svg",{staticClass:"bi bi-plus-circle-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"}})])]),a("button",{staticClass:"btn btn-primary mr-2",attrs:{type:"button"},on:{click:function(e){return t.addBarcodeInput("lens")}}},[t._v(" Tambah Lensa Standar "),a("svg",{staticClass:"bi bi-plus-circle-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"}})])]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.addCustomLensInput}},[t._v(" Tambah Lensa Custom "),a("svg",{staticClass:"bi bi-plus-circle-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"}})])])])])],2)]),a("br"),a("br"),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("h3",[t._v("Promosi")]),a("hr"),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedPromotion,expression:"selectedPromotion"}],staticClass:"form-control",attrs:{"aria-label":"promotion selection",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedPromotion=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"0"}},[t._v("Tanpa promosi")]),t._l(t.promotions,(function(e){return a("option",{key:e.id,domProps:{value:e.promotionId}},[t._v(" "+t._s(e.name)+" ")])}))],2)])]),t.specialPromo?a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("h4",[t._v("Select sale order")]),a("hr"),a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.saleNumber,expression:"saleNumber"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"firstSale",name:"customRadio",required:""},domProps:{value:1,checked:t._q(t.saleNumber,1)},on:{change:function(e){t.saleNumber=1}}}),a("label",{staticClass:"custom-control-label",attrs:{for:"firstSale"}},[t._v(" First sale ")])]),a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.saleNumber,expression:"saleNumber"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"secondSale",name:"customRadio",required:""},domProps:{value:2,checked:t._q(t.saleNumber,2)},on:{change:function(e){t.saleNumber=2}}}),a("label",{staticClass:"custom-control-label",attrs:{for:"secondSale"}},[t._v(" Second Sale ")])])])]):t._e(),a("br"),a("br"),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col-4"},[a("h3",[t._v("Salesman")]),a("hr"),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedEmployeeId,expression:"selectedEmployeeId"}],staticClass:"form-control",attrs:{"aria-label":"employee selection",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedEmployeeId=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v("Pilih Karyawan")]),t._l(t.employees,(function(e){return a("option",{key:e.id,domProps:{value:e.employeeId}},[t._v(" "+t._s(e.firstName)+" "+t._s(e.lastname)+" ("+t._s(e.jobTitle)+") ")])}))],2)])]),a("br"),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("h3",[t._v("Remarks")]),a("hr"),a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.remarks,expression:"remarks",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{name:"remarks",id:"remarksInput",placeholder:"Catatan..."},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),a("br"),t.showTable?a("div",[t._m(4),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("table",{staticClass:"table"},[t._m(5),a("tbody",[t._l(t.productIds.frames,(function(e){return a("tr",{key:e.id},[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.productId))]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.quantity))]),a("td",[t._v(t._s(e.quantity*e.price))])])})),t._l(t.productIds.lenses,(function(e){return a("tr",{key:e.id},[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.productId))]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.quantity))]),a("td",[t._v(t._s(e.quantity*e.price))])])})),t._l(t.productIds.customLenses,(function(e){return a("tr",{key:e.id},[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.productId))]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.quantity))]),a("td",[t._v(t._s(e.quantity*e.price))])])}))],2)])])])]):t._e(),a("hr"),a("div",{attrs:{id:"costBreakdownDiv"}},[a("div",{staticClass:"row justify-content-end"},[t._m(6),a("div",{staticClass:"col-2 text-right"},[a("span",{staticClass:"text-success align-middle costBreakdown"},[t._v(" "+t._s(t.totalAmount)+" Rupiah ")])])]),a("div",{staticClass:"row justify-content-end"},[t._m(7),a("div",{staticClass:"col-2 text-right"},[a("span",{staticClass:"text-success align-middle costBreakdown"},[t._v(" "+t._s(t.discountName)+" ")])])]),a("div",{staticClass:"row mb-3 justify-content-end"},[t._m(8),a("div",{staticClass:"col-2 text-right"},[a("span",{staticClass:"text-success align-middle costBreakdown"},[t._v(" "+t._s(t.netAmount)+" Rupiah ")])])])]),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col-9"}),a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-primary float-right",attrs:{type:"submit",disabled:t.formHasErrors,"data-toggle":"modal","data-target":"#"+t.modalToOpen,id:"continueToPaymentBtn"},on:{click:function(e){return t.openPaymentModal(e)}}},[t._v(" Checkout Penjualan ")]),a("button",{staticClass:"btn btn-danger mr-2 float-right",attrs:{type:"reset"},on:{click:t.resetData}},[t._v(" Batalkan Penjualan ")])])])],1),t.showPaymentModal&&t.specialPromo?a("div",{staticClass:"modal fade",attrs:{id:"selectFirstSaleModal",tabindex:"-1","aria-labelledby":"selectFirstSaleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-xl"},[a("div",{staticClass:"modal-content"},[t._m(9),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"alert alert-info",class:{alertInfo:!t.showDiscountError,"alert-danger":t.showDiscountError},attrs:{role:"alert"}},[a("strong",[t._v(t._s(t.productIds.frames[0].productId)+" ")]),t._v(" has to be cheaper than the frame purchased in the first sale ")]),a("div",{staticClass:"form-group mb-2"},[a("label",{attrs:{for:"firstSaleId"}},[t._v("Select from this list")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedFirstSaleId,expression:"selectedFirstSaleId"}],staticClass:"form-control",attrs:{id:"firstSaleId"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedFirstSaleId=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"0",selected:"",disabled:""}},[t._v("Select first sale")]),t._l(t.firstSaleList,(function(e){return a("option",{key:e.id,domProps:{value:e.saleId}},[t._v(" Customer: "+t._s(e.customer.firstName)+" "+t._s(e.customer.lastName)+" - Frame: "+t._s(e.saleDetailList[0].product.productName)+" ("+t._s(e.saleDetailList[0].product.productId)+") - Price: "+t._s(e.grandTotal)+" Rupiah Date/Time: "+t._s(new Date(e.initialDepositDate).toUTCString())+" ")])}))],2)])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.resetSaleSelection}},[t._v(" Close ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal","data-toggle":"modal","data-target":"#paymentModal",disabled:t.showDiscountError||!t.selectedFirstSaleId},on:{click:t.applyDiscount}},[t._v(" Proceed to checkout ")])])])])]):t._e(),t.showPaymentModal?a("div",{ref:"modal",staticClass:"modal fade",attrs:{id:"paymentModal","data-backdrop":"static",tabindex:"-1",role:"dialog","aria-labelledby":"continueToPaymentBtn","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("Pembayaran")]),t.successfulSale?t._e():a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.showDepositInfo,expression:"showDepositInfo"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"showDepositInfo",disabled:t.hasCustomerPaid||t.specialPromo||t.successfulSale},domProps:{checked:Array.isArray(t.showDepositInfo)?t._i(t.showDepositInfo,null)>-1:t.showDepositInfo},on:{change:function(e){var a=t.showDepositInfo,s=e.target,r=!!s.checked;if(Array.isArray(a)){var i=null,n=t._i(a,i);s.checked?n<0&&(t.showDepositInfo=a.concat([i])):n>-1&&(t.showDepositInfo=a.slice(0,n).concat(a.slice(n+1)))}else t.showDepositInfo=r}}}),a("label",{staticClass:"form-check-label",attrs:{for:"showDepositInfo"}},[t._v(" Pembayaran dengan Deposit ")])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-check d-inline-block"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.hasCustomerPaid,expression:"hasCustomerPaid"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"hasCustomerPaid",id:"hasCustomerPaid",disabled:t.showDepositInfo||t.successfulSale},domProps:{checked:Array.isArray(t.hasCustomerPaid)?t._i(t.hasCustomerPaid,null)>-1:t.hasCustomerPaid},on:{change:function(e){var a=t.hasCustomerPaid,s=e.target,r=!!s.checked;if(Array.isArray(a)){var i=null,n=t._i(a,i);s.checked?n<0&&(t.hasCustomerPaid=a.concat([i])):n>-1&&(t.hasCustomerPaid=a.slice(0,n).concat(a.slice(n+1)))}else t.hasCustomerPaid=r}}}),a("label",{staticClass:"form-check-label",attrs:{for:"hasCustomerPaid"}},[t._v(" Pembayaran Penuh ")])])])]),a("hr"),t.showDepositInfo?a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("h3",[t._v("Pembayaran Deposit")]),a("hr"),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("label",{staticClass:"form-label",attrs:{for:"Initial Payment Amount"}},[t._v(" Jumlah Persentase Pembayaran ")]),a("div",{staticClass:"input-group mb-2"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedDepositPercentage,expression:"selectedDepositPercentage"}],staticClass:"form-control",attrs:{required:t.hasCustomerPaid},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedDepositPercentage=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"0",disabled:""}},[t._v("Pilih jumlah deposit")]),t._l(t.depositPercentages,(function(e){return a("option",{key:e.id,domProps:{value:e}},[t._v(" "+t._s(e)+"% ")])}))],2)]),a("div",{staticClass:"input-group mb-3"},[a("span",{staticClass:"input-group-text",attrs:{id:"rupiah-currency"}},[t._v("Rp")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.initialPaymentAmt,expression:"initialPaymentAmt",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number","aria-label":"initialPaymentAmount","aria-describedby":"rupiah-currency",readonly:""},domProps:{value:t.initialPaymentAmt},on:{input:function(e){e.target.composing||(t.initialPaymentAmt=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])])])])]):t._e(),t.hasCustomerPaid||t.showDepositInfo?a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label",attrs:{for:"Payment Type"}},[t._v(" Jenis Pembayaran ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedPaymentType,expression:"selectedPaymentType"}],staticClass:"form-control",attrs:{required:t.hasCustomerPaid},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedPaymentType=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v("Jenis Pembayaran")]),t._l(t.paymentTypes,(function(e){return a("option",{key:e.id},[t._v(" "+t._s(e)+" ")])}))],2)]),"Cash"!=t.selectedPaymentType&&t.selectedPaymentType?a("div",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"paymentTypeNameInput"}},[t._v("Bank Name")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.bankName,expression:"bankName",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"paymentTypeNameInput"},domProps:{value:t.bankName},on:{input:function(e){e.target.composing||(t.bankName=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"accountNumberInput"}},[t._v("Account Number")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.accountNumber,expression:"accountNumber",modifiers:{number:!0}}],staticClass:"form-control",attrs:{minlength:"4",maxlength:"4",type:"number",id:"accountNumberInput",placeholder:"0000","aria-describedby":"accountNumberHelp"},domProps:{value:t.accountNumber},on:{input:function(e){e.target.composing||(t.accountNumber=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"accountNumberHelp"}},[t._v("This should contain the last 4 digits")])])]):t._e()])]):t._e()]),a("div",{staticClass:"modal-footer"},[t.successfulSale?a("div",[a("button",{staticClass:"btn btn-primary",attrs:{"data-dismiss":"modal",type:"button",href:"#invoiceModal","data-toggle":"modal"}},[t._v(" Print invoice ")])]):a("div",[a("button",{staticClass:"btn btn-secondary mr-2",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" Cancel ")]),a("button",{staticClass:"btn btn-success",attrs:{disabled:!t.validPaymentInfo},on:{click:function(e){return t.createSale()}}},[t._v(" Create Sale ")])])])])])]):t._e(),a("Invoice",{attrs:{customer:t.currentCustomer,"employee-name":t.selectedEmployeeName,products:t.productIds,"payment-type":t.selectedPaymentType,"account-num":t.accountNumber,"total-amt":t.totalAmount,"net-amt":t.netAmount,depositAmt:t.initialPaymentAmt,"discount-percentage":t.discountPercentage,"updated-prescription":t.prescription,"new-sale-id":t.newSaleId,"fully-paid":t.hasCustomerPaid},on:{donePrinting:t.resetData}})],1)},m=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"spinner-border text-light",staticStyle:{width:"3rem",height:"3rem"},attrs:{id:"loader",role:"status"}},[a("span",{staticClass:"sr-only"},[t._v("Loading...")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col"},[a("h4",[t._v("Frames")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col"},[a("h4",[t._v("Lensa Standar")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col"},[a("h4",[t._v("Custom Lenses")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("h5",[t._v("Sale Details")]),a("hr")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Kode Barang")]),a("th",{attrs:{scope:"col"}},[t._v("Nama Barang")]),a("th",{attrs:{scope:"col"}},[t._v("Qty")]),a("th",{attrs:{scope:"col"}},[t._v("Harga Barang")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-2 text-right"},[a("h4",[t._v("Harga Total:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-2 text-right"},[a("h4",[t._v("Promosi / Diskon:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-2 text-right"},[a("h4",[t._v("Net Amount:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"selectFirstSaleModalLabel"}},[t._v(" Select first sale ")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],p=(a("99af"),a("7db0"),a("d81d"),a("45fc"),a("a434"),a("accc"),a("0d03"),a("b0c0"),a("b680"),a("d3b7"),a("acd8"),a("4d63"),a("ac1f"),a("25f0"),a("2909")),v=a("5530"),f=a("bc3a"),h=a.n(f),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.list?a("div",[0===t.list.length?a("div",{staticClass:"alert alert-warning alert-dismissible fade show",attrs:{role:"alert"}},[t._v(" Tidak ada pelanggan dapat ditemukan dengan nama yang diberikan "),t._m(0)]):t._e(),a("div",{staticClass:"row flex-row flex-nowrap overflow-auto mb-3"},t._l(t.list,(function(e){return a("div",{key:e.id,staticClass:"col-lg-auto"},[a("div",{staticClass:"card card-block"},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v(" "+t._s(e.firstName)+" "+t._s(e.lastName)+" ")]),a("p",{staticClass:"card-text"},[t._v("Email: "+t._s(e.email))]),a("p",{staticClass:"card-text"},[t._v("No Telepon: "+t._s(e.phoneNumber))]),a("button",{staticClass:"btn",class:t.currentSelectedCustomerClass(e.customerId),attrs:{type:"button"},on:{click:function(a){return t.selectCustomer(e.customerId)}}},[t._v(" "+t._s(t.currentSelectedCustomerText(e.customerId))+" ")])])])])})),0)]):t._e()},_=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],y={name:"CustomerList",props:["selectedCustomerId","list"],methods:{selectCustomer:function(t){this.$emit("selectCustomer",t)},currentSelectedCustomerClass:function(t){return this.isCustomerSelected(t)?"btn-success":"btn-primary"},currentSelectedCustomerText:function(t){return this.isCustomerSelected(t)?"Customer selected":"Pilih Pelanggan"},isCustomerSelected:function(t){return this.selectedCustomerId===t}}},C=y,g=(a("0ed3"),Object(n["a"])(C,b,_,!1,null,"5e3c8318",null)),P=g.exports,I=a("2ef0"),w=a.n(I),S={storeId:null,storeName:"",storePhoneNum:""},E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.showPrescription,expression:"showPrescription"}],staticClass:"row"},[a("div",{staticClass:"col"},[t._m(0),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("h4",[t._v("Mata Kanan (R)")]),a("div",{staticClass:"row mb-3"},[a("PrescriptionInput",{attrs:{name:"SPH",side:"Kanan"},model:{value:t.prescriptionValues.rightEyeSphere,callback:function(e){t.$set(t.prescriptionValues,"rightEyeSphere",e)},expression:"prescriptionValues.rightEyeSphere"}}),a("PrescriptionInput",{attrs:{name:"CYL",side:"Kanan"},model:{value:t.prescriptionValues.rightEyeCylinder,callback:function(e){t.$set(t.prescriptionValues,"rightEyeCylinder",e)},expression:"prescriptionValues.rightEyeCylinder"}}),a("PrescriptionInput",{attrs:{name:"Axis",side:"Kanan"},model:{value:t.prescriptionValues.rightEyeAxis,callback:function(e){t.$set(t.prescriptionValues,"rightEyeAxis",e)},expression:"prescriptionValues.rightEyeAxis"}}),a("PrescriptionInput",{attrs:{name:"ADD",side:"Kanan"},model:{value:t.prescriptionValues.rightEyeAdd,callback:function(e){t.$set(t.prescriptionValues,"rightEyeAdd",e)},expression:"prescriptionValues.rightEyeAdd"}}),a("PrescriptionInput",{attrs:{name:"P.Height",side:"Kanan"},model:{value:t.prescriptionValues.rightEyePrism,callback:function(e){t.$set(t.prescriptionValues,"rightEyePrism",e)},expression:"prescriptionValues.rightEyePrism"}}),a("PrescriptionInput",{attrs:{name:"PD",side:"Kanan"},model:{value:t.prescriptionValues.pupilDistance,callback:function(e){t.$set(t.prescriptionValues,"pupilDistance",e)},expression:"prescriptionValues.pupilDistance"}})],1),a("br"),a("h4",[t._v("Mata Kiri (L)")]),a("div",{staticClass:"row mb-3"},[a("PrescriptionInput",{attrs:{name:"SPH",side:"Kiri"},model:{value:t.prescriptionValues.leftEyeSphere,callback:function(e){t.$set(t.prescriptionValues,"leftEyeSphere",e)},expression:"prescriptionValues.leftEyeSphere"}}),a("PrescriptionInput",{attrs:{name:"CYL",side:"Kiri"},model:{value:t.prescriptionValues.leftEyeCylinder,callback:function(e){t.$set(t.prescriptionValues,"leftEyeCylinder",e)},expression:"prescriptionValues.leftEyeCylinder"}}),a("PrescriptionInput",{ref:"leftEyeAxis",attrs:{name:"Axis",side:"Kiri"},model:{value:t.prescriptionValues.leftEyeAxis,callback:function(e){t.$set(t.prescriptionValues,"leftEyeAxis",e)},expression:"prescriptionValues.leftEyeAxis"}}),a("PrescriptionInput",{attrs:{name:"ADD",side:"Kiri"},model:{value:t.prescriptionValues.leftEyeAdd,callback:function(e){t.$set(t.prescriptionValues,"leftEyeAdd",e)},expression:"prescriptionValues.leftEyeAdd"}}),a("PrescriptionInput",{attrs:{name:"P.Height",side:"Kiri"},model:{value:t.prescriptionValues.leftEyePrism,callback:function(e){t.$set(t.prescriptionValues,"leftEyePrism",e)},expression:"prescriptionValues.leftEyePrism"}}),a("div",{staticClass:"col"})],1)])])])])},N=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-3 row"},[a("div",{staticClass:"col"},[a("h4",[t._v(" Resep Kacamata ")])])])}],x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col"},[a("div",{staticClass:"form-group mb-2"},[a("label",{staticClass:"form-label"},[t.showSide?a("span",[t._v("Mata "+t._s(t.side)+" ")]):t._e(),t._v(" "+t._s(t.name)+" ")])]),a("div",{staticClass:"row "},t._l(t.inputs,(function(e){return a("div",{key:e.id,staticClass:"col",class:{noPadding:t.inputs.length>1}},[a(e.component,{tag:"component",attrs:{options:t.getValuesForInput(e),default:e.defaultVal},on:{change:t.updateFinalVal}})],1)})),0)])},k=[],A=(a("b65f"),a("5319"),[{name:"SPH",inputs:[{signValues:["+","-"],component:"SelectInput",defaultVal:"+"},{min:0,max:12,interval:1,component:"SelectInput"},{min:0,max:.75,interval:.25,component:"SelectInput",defaultVal:".00"}]},{name:"CYL",inputs:[{signValues:["-"],component:"SelectInput",defaultVal:"-"},{min:0,max:6,interval:1,component:"SelectInput"},{min:0,max:.75,interval:.25,component:"SelectInput",defaultVal:".00"}]},{name:"Axis",inputs:[{min:0,max:180,interval:1,component:"SelectInput"}]},{name:"ADD",inputs:[{min:0,max:3,interval:.25,component:"SelectInput",defaultVal:"0.00"}]},{name:"P.Height",inputs:[{component:"TextInput",defaultVal:""}]},{name:"PD",inputs:[{min:0,max:200,interval:1,component:"SelectInput"}]}]),D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedVal,expression:"selectedVal"}],staticClass:"custom-select",attrs:{required:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedVal=e.target.multiple?a:a[0]},function(e){return t.$emit("change")}]}},t._l(t.options,(function(e){return a("option",{key:e.id,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),0)},$=[],L={name:"SelectInput",props:["options","default"],data:function(){var t;return{selectedVal:null!==(t=this["default"])&&void 0!==t?t:0}}},T=L,q=Object(n["a"])(T,D,$,!1,null,null,null),V=q.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("input",{directives:[{name:"model",rawName:"v-model",value:t.textVal,expression:"textVal"}],staticClass:"form-control",attrs:{placeholder:t.options},domProps:{value:t.textVal},on:{input:[function(e){e.target.composing||(t.textVal=e.target.value)},function(e){return t.$emit("change")}]}})},R=[],M={name:"TextInput",props:["options"],data:function(){return{textVal:""}}},O=M,B=Object(n["a"])(O,j,R,!1,null,null,null),F=B.exports,Q={name:"PrescriptionInput",props:["name","side","value"],components:{SelectInput:V,TextInput:F},model:{prop:"value",event:"change"},data:function(){return{prescriptionDetails:null,finalVal:0}},created:function(){this.prescriptionDetails=w.a.find(A,{name:this.name})},computed:{inputs:function(){return this.prescriptionDetails.inputs},showSide:function(){return"PD"!=this.name}},methods:{updateFinalVal:function(){if("SPH"===this.name||"CYL"===this.name){var t=this.$children[0].selectedVal,e=parseFloat(this.$children[1].selectedVal),a=parseFloat(this.$children[2].selectedVal);this.finalVal=parseFloat("".concat(t).concat(e+a))}else"P.Height"===this.name?this.finalVal=this.$children[0].textVal:this.finalVal=parseFloat(this.$children[0].selectedVal)},getValuesForInput:function(t){if(t.signValues)return t.signValues;if(t.placeholder)return t.placeholder;for(var e=[],a=t.min;a<=t.max;a+=t.interval){var s=a;.25===t.interval&&(s="SPH"===this.name||"CYL"===this.name?a.toFixed(2).replace(/^0/,""):a.toFixed(2)),e.push(s)}return e}},watch:{finalVal:{handler:function(t){console.log("FINAL VAL CHANGED"),this.$emit("change",t)}},value:{handler:function(t){console.log("VAL CHANGED",t,this.name,this.side),null!==t?(this.finalVal=t,"SPH"===this.name||"CYL"===this.name?(this.$children[0].selectedVal=t<0?"-":"+",this.$children[1].selectedVal=Math.abs(Math.trunc(t)),this.$children[2].selectedVal=Math.abs(t%1).toFixed(2).replace(/^0/,"")):"P.Height"===this.name?this.$children[0].textVal=t:.25===this.inputs[0].interval?this.$children[0].selectedVal=t.toFixed(2):this.$children[0].selectedVal=t):this.finalVal=0}}}},K=Q,H=(a("cc06"),Object(n["a"])(K,x,k,!1,null,null,null)),U=H.exports,z={leftEyeSphere:0,leftEyeCylinder:0,leftEyeAxis:0,leftEyeAdd:0,leftEyePrism:"",rightEyeSphere:0,rightEyeCylinder:0,rightEyeAxis:0,rightEyeAdd:0,rightEyePrism:"",pupilDistance:0},J={name:"Prescription",props:["showPrescription"],components:{PrescriptionInput:U},data:function(){return{prescriptionValues:Object(v["a"])({},z)}},methods:{resetPrescriptionValues:function(){Object.assign(this.prescriptionValues,Object(v["a"])({},z))},setPrescriptionValues:function(t){t?Object.assign(this.prescriptionValues,Object(v["a"])({},t)):this.resetPrescriptionValues()}},watch:{showPrescription:function(t){t||this.resetPrescriptionValues()}}},Y=J,G=Object(n["a"])(Y,E,N,!1,null,null,null),W=G.exports,X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.renderData?a("div",[a("div",{staticClass:"modal fade",attrs:{id:"invoiceModal","data-backdrop":"static","data-keyboard":"false",tabindex:"-1","aria-labelledby":"invoiceModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-xl"},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("div",{attrs:{id:"invoiceSetup"}},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[t._m(1),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("p",[t._v(" "+t._s(t.storeAddress)+" ")])])]),a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col"},[t._v("Tel: "+t._s(t.storePhoneNum))])])])]),a("div",{staticClass:"row mb-5"},[a("div",{staticClass:"col"},[a("h3",{staticClass:"text-center"},[t._v(t._s(t.headerText))])])]),a("div",{staticClass:"row mb-5 justify-content-around"},[a("div",{staticClass:"col-4"},[a("div",{staticClass:"row "},[t._m(2),a("div",{staticClass:"col-md-auto text-right"},[a("span",{staticClass:"align-middle"},[t._v(" "+t._s(t.customerName)+" ")])])]),a("div",{staticClass:"row "},[t._m(3),a("div",{staticClass:"col-md-auto text-right"},[a("span",{staticClass:"align-middle"},[t._v(" "+t._s(t.customer.phoneNumber)+" ")])])]),a("div",{staticClass:"row "},[t._m(4),a("div",{staticClass:"col-md-auto text-right"},[a("span",{staticClass:"align-middle"},[t._v(" "+t._s(t.customer.email)+" ")])])]),a("div",{staticClass:"row "},[t._m(5),a("div",{staticClass:"col-md-auto text-right"},[a("span",{staticClass:"align-middle"},[t._v(" "+t._s(t.customer.customerId)+" ")])])])]),a("div",{staticClass:"col-5"},[a("div",{staticClass:"row "},[t._m(6),a("div",{staticClass:"col-md-auto text-right"},[a("span",{staticClass:"align-middle"},[t._v(" "+t._s(t.newSaleId)+" ")])])]),a("div",{staticClass:"row "},[t._m(7),a("div",{staticClass:"col-md-auto text-right"},[a("span",{staticClass:"align-middle"},[t._v(" "+t._s(t.currentDate)+" ")])])]),a("div",{staticClass:"row "},[t._m(8),a("div",{staticClass:"col-md-auto text-right"},[a("span",{staticClass:"align-middle"},[t._v(" "+t._s(t.employeeName)+" ")])])]),a("div",{staticClass:"row "},[t._m(9),a("div",{staticClass:"col-md-auto text-right"},[a("span",{staticClass:"align-middle"},[t._v(" "+t._s(t.storeName)+" ")])])])])]),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("table",{staticClass:"table"},[t._m(10),a("tbody",[t._l(t.products.frames,(function(e){return a("tr",{key:e.id},[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.productId))]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.quantity))])])})),t._l(t.products.lenses,(function(e){return a("tr",{key:e.id},[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.productId))]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.quantity))])])})),t._l(t.products.customLenses,(function(e){return a("tr",{key:e.id},[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.productId))]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.quantity))])])}))],2)])])]),a("hr"),a("div",{staticClass:"row justify-content-between"},[a("div",{staticClass:"col-7"},[a("table",{staticClass:"table table-borderless"},[t._m(11),a("tbody",[a("tr",[a("td",[t._v(t._s(t.paymentType))]),a("td",[t._v(t._s(t.accountNum))]),a("td",[t._v("RP "+t._s(t.formatNumber(t.totalAmt)))]),a("td",[t._v("0")]),a("td",[t._v(t._s(t.numOfProducts))])])])])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"row mt-3 justify-content-between"},[t._m(12),a("div",{staticClass:"col-md-auto text-right"},[a("span",{staticClass:"align-middle"},[t._v(" RP "+t._s(t.formatNumber(t.totalAmt))+" ")])])]),a("div",{staticClass:"row justify-content-between"},[t._m(13),a("div",{staticClass:"col-md-auto text-right"},[a("span",{staticClass:"align-middle"},[t._v(" "+t._s(t.discountPercentage)+"% ")])])]),a("div",{staticClass:"row justify-content-between "},[t._m(14),a("div",{staticClass:"col-md-auto text-right"},[a("span",{staticClass:"align-middle"},[t._v(" RP "+t._s(t.formatNumber(t.netAmt))+" ")])])]),a("div",{staticClass:"row justify-content-between"},[t._m(15),a("div",{staticClass:"col-md-auto text-right"},[a("span",{staticClass:"align-middle"},[t._v(" RP "+t._s(t.formatNumber(t.depositAmt))+" ")])])]),a("div",{staticClass:"row justify-content-between"},[t._m(16),a("div",{staticClass:"col-md-auto text-right"},[a("span",{staticClass:"align-middle"},[t._v(" RP "+t._s(t.formatNumber(t.balanceAmt))+" ")])])])])]),t.renderPrescription?a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col"},[a("table",{staticClass:"table table-sm table-bordered"},[t._m(17),a("tbody",[a("tr",[a("td",[t._v("OLD RX (R)")]),a("td",[t._v(t._s(t.customer.rightEyeSphere))]),a("td",[t._v(t._s(t.customer.rightEyeCylinder))]),a("td",[t._v(t._s(t.customer.rightEyeAxis))]),a("td",[t._v(t._s(t.customer.rightEyeAdd))]),a("td",[t._v(t._s(t.customer.rightEyePrism))]),a("td",[t._v(t._s(t.customer.pupilDistance))]),a("td")]),a("tr",[a("td",[t._v("OLD RX (L)")]),a("td",[t._v(t._s(t.customer.leftEyeSphere))]),a("td",[t._v(t._s(t.customer.leftEyeCylinder))]),a("td",[t._v(t._s(t.customer.leftEyeAxis))]),a("td",[t._v(t._s(t.customer.leftEyeAdd))]),a("td",[t._v(t._s(t.customer.leftEyePrism))]),a("td"),a("td")]),a("tr",[a("td",[t._v("New RX (R)")]),a("td",[t._v(t._s(t.updatedPrescription.rightEyeSphere))]),a("td",[t._v(t._s(t.updatedPrescription.rightEyeCylinder))]),a("td",[t._v(t._s(t.updatedPrescription.rightEyeAxis))]),a("td",[t._v(t._s(t.updatedPrescription.rightEyeAdd))]),a("td",[t._v(t._s(t.updatedPrescription.rightEyePrism))]),a("td",[t._v(t._s(t.updatedPrescription.pupilDistance))]),a("td")]),a("tr",[a("td",[t._v("New RX (L)")]),a("td",[t._v(t._s(t.updatedPrescription.leftEyeSphere))]),a("td",[t._v(t._s(t.updatedPrescription.leftEyeCylinder))]),a("td",[t._v(t._s(t.updatedPrescription.leftEyeAxis))]),a("td",[t._v(t._s(t.updatedPrescription.leftEyeAdd))]),a("td",[t._v(t._s(t.updatedPrescription.leftEyePrism))]),a("td"),a("td")])])])])]):t._e(),t._m(18),t._m(19)])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.donePrinting,expression:"donePrinting"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:"",id:"donePrinting",disabled:t.disableCheckbox},domProps:{checked:Array.isArray(t.donePrinting)?t._i(t.donePrinting,"")>-1:t.donePrinting},on:{change:function(e){var a=t.donePrinting,s=e.target,r=!!s.checked;if(Array.isArray(a)){var i="",n=t._i(a,i);s.checked?n<0&&(t.donePrinting=a.concat([i])):n>-1&&(t.donePrinting=a.slice(0,n).concat(a.slice(n+1)))}else t.donePrinting=r}}}),a("label",{staticClass:"form-check-label",attrs:{for:"donePrinting"}},[t._v(" Sudah print invoice? ")])])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.print}},[t._v(" Print ")]),a("button",{staticClass:"btn btn-success",attrs:{type:"button","data-dismiss":"modal",disabled:!t.donePrinting},on:{click:t.finishTransaction}},[t._v(" Finish ")])])])])])]):t._e()},Z=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"invoiceModalLabel"}},[t._v("Print Invoice")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("h3",[t._v("OWL EYEWEAR INDONESIA")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6"},[a("p",[t._v("Customer Name:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6"},[a("p",[t._v("Customer Contact:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6"},[a("p",[t._v("Customer Email:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6"},[a("p",[t._v("Customer Id:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6"},[a("p",[t._v("Invoice No:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6"},[a("p",[t._v("Date:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6"},[a("p",[t._v("Salesman:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6"},[a("p",[t._v("Shop Name:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Item Code")]),a("th",[t._v("Item Name")]),a("th",[t._v("Qty")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Pay Type")]),a("th",[t._v("No")]),a("th",[t._v("Amount")]),a("th",[t._v("Change Amount")]),a("th",[t._v("Total")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 text-right"},[a("p",[t._v("Total Amt:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 text-right"},[a("p",[t._v("Discount:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 text-right"},[a("p",[t._v("Net Amt:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 text-right"},[a("p",[t._v("Deposit Amt:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 text-right"},[a("p",[t._v("Balance Amt:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th"),a("th",[t._v("SPH")]),a("th",[t._v("CYL")]),a("th",[t._v("AXIS")]),a("th",[t._v("ADD")]),a("th",[t._v("P.Height")]),a("th",[t._v("PD")]),a("th",[t._v("Remarks")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col"},[a("ul",[a("li",{staticClass:"str"},[t._v(" Thank you for your kind support and we look forward to your continued patronage. ")]),a("li",{staticClass:"str"},[t._v(" Non-payment or settlement of balance within 60 days of receipt data will result in forfeiture of deposit. ")]),a("li",{staticClass:"str"},[t._v(" I have read and understood the terms of privacy policy statement and consent to handling of my personal information as described herein ")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-5 d-flex justify-content-end"},[a("div",{staticClass:"col-md-auto"},[t._v(" Customer's Sigrature and Date ")]),a("div",{staticClass:"col-4 border-bottom border-dark"})])}],tt=(a("a623"),a("ddb0"),{name:"Invoice",data:function(){return{donePrinting:!1,disableCheckbox:!0}},props:["customer","employeeName","products","paymentType","accountNum","totalAmt","netAmt","depositAmt","discountPercentage","updatedPrescription","newSaleId","fullyPaid"],computed:{currentDate:function(){var t=new Date,e=t.getDate(),a=t.getMonth(),s=t.getFullYear(),r=t.toLocaleTimeString();return"".concat(e,"/").concat(a,"/").concat(s," ").concat(r)},storeAddress:function(){return S.storeAddress},storeName:function(){return S.storeName},storePhoneNum:function(){return S.storePhoneNum},customerName:function(){return"".concat(this.customer.firstName," ").concat(this.customer.lastName)},renderData:function(){var t=w.a.values(this.$props);return t.every((function(t){return null!==t||void 0!==t}))},numOfProducts:function(){return this.products.frames.length+this.products.lenses.length+this.products.customLenses.length},balanceAmt:function(){return this.fullyPaid?0:this.netAmt-this.depositAmt},renderPrescription:function(){return void 0!==this.customer.rightEyeSphere},headerText:function(){return this.fullyPaid?"Tax Invoice":"Deposit"}},methods:{print:function(){var t=this;this.$htmlToPaper("invoiceSetup",null,(function(){console.log("Printing completed or was cancelled!"),t.disableCheckbox=!1}))},formatNumber:function(t){return t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},finishTransaction:function(){confirm("Are you sure you have printed the invoice?")&&(this.$emit("donePrinting"),this.disableCheckbox=!0)}}}),et=tt,at=(a("3fb4"),Object(n["a"])(et,X,Z,!1,null,"0634b434",null)),st=at.exports,rt="https://owl-backend-server.herokuapp.com/posEndpoint",it=function(){return{loading:!1,productIds:{frames:[],lenses:[],customLenses:[]},customLenses:[],employees:[],selectedEmployeeId:"",firstName:"",lastName:"",phoneNum:"",email:"",promotions:[],selectedPromotion:0,showDepositInfo:!1,paymentTypes:["Cash","Debit","Credit"],depositPercentages:[50,60,70,80],selectedDepositPercentage:0,selectedPaymentType:"",createNewCustomer:!1,customerList:null,selectedCustomerId:null,hasCustomerPaid:!1,showPaymentModal:!1,firstFrameId:"",secondFrameId:"",saleNumber:0,firstSaleList:[],selectedFirstSaleId:0,showDiscountError:!1,bankName:"",accountNumber:"",isMounted:!1,newSaleId:null,successfulSale:!1,remarks:""}},nt={name:"SalesForm",components:{CustomerList:P,Prescription:W,Invoice:st},data:it,created:function(){this.fetchDataFromServer()},mounted:function(){this.isMounted=!0},computed:{initialPaymentAmt:function(){return this.netAmount*this.selectedDepositPercentage/100},prescription:function(){return this.isMounted?this.$refs.prescriptionElem.prescriptionValues:null},showCustomerInfo:function(){return!(this.customerList||!this.createNewCustomer)||(null!==this.selectedCustomerId||this.createNewCustomer)},currentCustomer:function(){return!this.selectedCustomerId||this.createNewCustomer?Object(v["a"])({firstName:this.firstName,lastName:this.lastName,phoneNumber:this.phoneNum,email:this.email,customerId:0},this.prescription):this.getCustomer(this.selectedCustomerId)},selectedEmployeeName:function(){var t=this;if(!this.selectedEmployeeId)return null;var e=this.employees.find((function(e){return e.employeeId==t.selectedEmployeeId})),a=e.firstName,s=e.lastname;return"".concat(a," ").concat(s)},discountName:function(){var t=this,e=this.promotions.find((function(e){return e.promotionId==t.selectedPromotion}));return e?e.name:"0%"},discountPercentage:function(){var t=this,e=this.promotions.find((function(e){return e.promotionId==t.selectedPromotion}));return e?e.discountVal:0},totalAmount:function(){var t=0,e=0,a=0,s=0;return(this.productIds.frames.length>0||this.productIds.lenses.length>0||this.productIds.customLenses.length>0)&&(t=w.a.sumBy(this.productIds.frames,(function(t){return t.price*t.quantity})),e=w.a.sumBy(this.productIds.lenses,(function(t){return t.price*t.quantity})),a=w.a.sumBy(this.productIds.customLenses,(function(t){return t.price*t.quantity})),s+=e+t+a),s},netAmount:function(){var t=this,e=this.totalAmount,a=this.promotions.find((function(e){return e.promotionId==t.selectedPromotion}));if(a&&0!==a.discountVal&&!this.specialPromo){var s=e*(a.discountVal/100);e-=s}return parseFloat(e.toFixed(2))},validPaymentInfo:function(){return"Cash"===this.selectedPaymentType||this.accountNumber&&this.bankName&&4===this.accountNumber.toString().length},validPhoneNum:function(){var t=new RegExp("^\\d+$");return t.test(this.phoneNum)},formHasErrors:function(){var t=w.a.some(this.productIds.frames,(function(t){return t.barcodeError||t.quantityError})),e=w.a.some(this.productIds.lenses,(function(t){return t.barcodeError||t.quantityError})),a=w.a.some(this.productIds.customLenses,(function(t){return t.error}));return t||e||a},modalToOpen:function(){return this.specialPromo&&2===this.saleNumber?"selectFirstSaleModal":"paymentModal"},specialPromo:function(){return 1===this.selectedPromotion||2===this.selectedPromotion},showTable:function(){return this.productIds.frames.length>0||this.productIds.lenses.length>0||this.productIds.customLenses.length>0}},methods:{resetFrameSelections:function(){this.firstFrameId=null,this.secondFrameId=null},resetSaleSelection:function(){this.selectedFirstSaleId=0,this.showDiscountError=!1},applyDiscount:function(){var t=this;if(this.specialPromo){var e=this.productIds.frames[0];if(!e.hasDiscountApplied){var a=this.promotions.find((function(e){return e.promotionId==t.selectedPromotion})),s=e.price*(a.discountVal/100);e.price-=s,e.hasDiscountApplied=!0}}},fetchDataFromServer:function(){var t=this;h.a.get("".concat(rt,"/getCustomLensList")).then((function(e){t.customLenses=e.data}))["catch"]((function(t){return console.error(t)})),h.a.get("".concat(rt,"/getStorePromotions?storeId=").concat(S.storeId)).then((function(e){var a=e.data;t.promotions=a.map((function(t){return{name:t.promotionName,discountVal:t.percentage,promotionId:t.promotionId}})),window.scrollTo(0,0)}))["catch"]((function(t){return console.error(t)})),h.a.get("".concat(rt,"/getStoreEmployees?storeId=").concat(S.storeId)).then((function(e){t.employees=e.data}))["catch"]((function(t){return console.error(t)}))},resetData:function(){Object.assign(this.$data,it()),this.isMounted=!0,this.fetchDataFromServer()},openPaymentModal:function(t){t.preventDefault();var e=document.getElementById("saleForm");e.checkValidity()?this.showPaymentModal=!0:(this.showPaymentModal=!1,e.reportValidity())},createSale:function(){var t=this;if(!this.formHasErrors){var e=this.productIds.frames.map((function(t){return{productId:t.productId,quantity:t.quantity}})),a=this.productIds.lenses.map((function(t){return{productId:t.productId,quantity:t.quantity}})),s=this.productIds.customLenses.map((function(t){return{productId:t.productId,quantity:t.quantity}})),r=[].concat(Object(p["a"])(e),Object(p["a"])(a),Object(p["a"])(s)),i=null;1===this.selectedPromotion?1===this.saleNumber?i=-1:2===this.saleNumber&&(i=this.selectedFirstSaleId):2===this.selectedPromotion&&(1===this.saleNumber?i=-2:2===this.saleNumber&&(i=this.selectedFirstSaleId));var n=this.selectedPaymentType;"Cash"!==this.selectedPaymentType&&(n+=",".concat(this.bankName,",").concat(this.accountNumber));var o={sale:{promotionId:this.selectedPromotion>0?this.selectedPromotion:null,promotionParentSaleId:i,grandTotal:"".concat(this.netAmount),employeeId:this.selectedEmployeeId,storeId:S.storeId,initialDepositDate:(new Date).toISOString(),initialDepositType:n,initialDepositAmount:this.showDepositInfo?"".concat(this.initialPaymentAmt):"".concat(this.netAmount),remarks:this.remarks,products:r},customerId:this.createNewCustomer?null:this.selectedCustomerId,customer:Object(v["a"])({firstName:this.firstName,lastName:this.lastName,phoneNumber:this.phoneNum,email:this.email},this.prescription)};console.log(o),h.a.post("".concat(rt,"/newSale"),o).then((function(e){console.log(e),t.newSaleId=e.data,alert("Sale created. Please print the invoice"),t.successfulSale=!0}))["catch"]((function(e){console.log(e.response),alert("Transaction was unsuccessful!"),t.successfulSale=!1}))}},validateBarcode:function(t){t&&h.a.get("".concat(rt,"/getInStoreProductQuantity?storeId=").concat(S.storeId,"&productId=").concat(t.productId)).then((function(e){var a=e.data,s=a.productPrice,r=a.quantity,i=a.productName;t.price=s,t.availableAmt=r,t.name=i,t.barcodeError=null,t.quantityError=t.quantity>r?"Quantity requested is more than what is available in store":null}))["catch"]((function(e){console.error(e),t.barcodeError="No such barcode exists",t.quantityError="",t.price=0,t.availableAmt=1,t.quantity=1,t.name=""}))},validateBarcodeInput:function(t,e){if("frame"===e){var a=this.productIds.frames[t];this.validateBarcode(a)}else{var s=this.productIds.lenses[t];this.validateBarcode(s)}},validateInputQuantity:function(t,e){var a=null;a="frame"===e?this.productIds.frames[t]:"lens"===e?this.productIds.lenses[t]:this.productIds.customLenses[t],this.validateQuantity(a)},validateQuantity:function(t){if(t){if(!t.productId)return void(t.barcodeError="Please enter a barcode");t.quantity>t.availableAmt?t.quantityError="Quantity requested is more than what is available in store":(t.barcodeError=null,t.quantityError=null)}},addBarcodeInput:function(t){"frame"===t?this.productIds.frames.push({productId:"",quantity:1,barcodeError:"",quantityError:"",price:0,availableAmt:1,name:"",hasDiscountApplied:!1}):this.productIds.lenses.push({productId:"",quantity:1,barcodeError:"",quantityError:"",price:0,availableAmt:1,name:""})},addCustomLensInput:function(){this.productIds.customLenses.push({productId:"",quantity:1,availableAmt:1,error:"Please select lens",price:0,name:""})},removeFrameInput:function(t){this.productIds.frames.splice(t,1)},removeCustomLensInput:function(t){this.productIds.customLenses.splice(t,1)},removeStockLensInput:function(t){this.productIds.lenses.splice(t,1)},searchCustomerByName:function(){var t=this;this.firstName&&this.lastName?(this.loading=!0,this.createNewCustomer=!1,h.a.get("".concat(rt,"/getCustomerByName?firstName=").concat(this.firstName,"&lastName=").concat(this.lastName)).then((function(e){t.customerList=Object(p["a"])(e.data),t.loading=!1}))["catch"]((function(t){console.log(t)}))):alert("Please fill in a customer first name and last name")},searchCustomerByPhone:function(){var t=this;this.validPhoneNum?(this.loading=!0,this.createNewCustomer=!1,h.a.get("".concat(rt,"/getCustomerByPhoneNumber?phoneNumber=").concat(this.phoneNum)).then((function(e){t.customerList=Object(p["a"])(e.data),t.loading=!1}))["catch"]((function(t){return console.log(t)}))):alert("Please enter a valid phone number")},getCustomer:function(t){var e=w.a.find(this.customerList,(function(e){return e.customerId==t}));return e},setCustomerInfo:function(t){var e=this.getCustomer(t);this.phoneNum=e.phoneNumber,this.email=e.email;var a={leftEyeSphere:e.leftEyeSphere,leftEyeCylinder:e.leftEyeCylinder,leftEyeAxis:e.leftEyeAxis,leftEyePrism:e.leftEyePrism,rightEyeSphere:e.rightEyeSphere,rightEyeCylinder:e.rightEyeCylinder,rightEyeAxis:e.rightEyeAxis,rightEyeAdd:e.rightEyeAdd,rightEyePrism:e.rightEyePrism,pupilDistance:e.pupilDistance};this.$refs.prescriptionElem.setPrescriptionValues(a),this.selectedCustomerId=e.customerId},resetCustomerInfo:function(){this.selectedCustomerId&&(this.selectedCustomerId,this.phoneNum="",this.email="",this.$refs.prescriptionElem.setPrescriptionValues(null))},setLensDetails:function(t){var e=this.productIds.customLenses[t];if(e){var a=e.productId,s=w.a.find(this.customLenses,(function(t){return t.productId===a})),r=s.productPrice,i=s.productName;e.price=r,e.name=i,e.error=null}},alertBuyOneGetOneIssue:function(){alert("You must have one frame to use the Buy 1 Get 1 promo or 2nd Pairs Promo"),this.selectedPromotion=0}},watch:{selectedPromotion:function(){this.specialPromo&&1!=this.productIds.frames.length&&this.alertBuyOneGetOneIssue()},productIds:{deep:!0,handler:function(t,e){1===this.selectedPromotion&&(1!=t.frames.length&&this.alertBuyOneGetOneIssue(),t.frames[0].productId!=e.frames[0].productId&&this.resetSaleSelection())}},saleNumber:function(t){var e=this;2===t&&h.a.get("".concat(rt,"/getPromotionalFirstSaleList?storeId=").concat(S.storeId,"&promoId=").concat(this.selectedPromotion)).then((function(t){console.log(t),e.firstSaleList=Object(p["a"])(t.data)}))["catch"]((function(t){alert(t.response.data),console.log(t)}))},selectedFirstSaleId:function(t){if(t){var e=this.firstSaleList.find((function(e){return e.saleId==t})),a=e.grandTotal;if(a){var s=this.productIds.frames[0].price;this.showDiscountError=!(s<=a)}}},createNewCustomer:function(t){t||(this.selectedCustomerId=null)}}},ot=nt,lt=(a("be88"),Object(n["a"])(ot,d,m,!1,null,"3a9db1b6",null)),ct=lt.exports,ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("Employee page")])},dt=[],mt={name:"Employees"},pt=mt,vt=Object(n["a"])(pt,ut,dt,!1,null,null,null),ft=vt.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-3 text-center"},[a("h1",[t._v("Pilih toko")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.storeId,expression:"storeId"}],staticClass:"custom-select custom-select-lg mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.storeId=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("Pilih toko")]),t._l(t.stores,(function(e){return a("option",{key:e.id,domProps:{value:e.storeId}},[t._v(" "+t._s(e.name)+" ")])}))],2),t.storeId?a("button",{staticClass:"btn btn-success btn-lg",on:{click:t.selectStore}},[t._v(" Pilih Toko ")]):t._e()])},bt=[],_t="https://owl-backend-server.herokuapp.com/hoStoresEndpoint/getAllStores",yt={name:"Home",data:function(){return{stores:[],storeId:""}},components:{},created:function(){var t=this;h.a.get("".concat(_t)).then((function(e){t.stores=Object(p["a"])(e.data)}))["catch"]((function(t){return console.log(t)}))},methods:{selectStore:function(){var t=this;S.storeId=this.storeId;var e=this.stores.find((function(e){return e.storeId==t.storeId})),a=e.name,s=e.phoneNumber,r=e.address;S.storeName=a,S.storePhoneNum=s,S.storeAddress=r,this.$router.push("PendingSales")}}},Ct=yt,gt=Object(n["a"])(Ct,ht,bt,!1,null,null,null),Pt=gt.exports,It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-3"},[t.showAlert?a("div",{staticClass:"alert alert-dismissible fade show",class:t.alertClass,attrs:{role:"alert"}},[t._v(" "+t._s(t.alertMsg)+" "),t._m(0)]):t._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("h3",[t._v("Penjualan Pending")]),a("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:t.updatePendingSalesList}},[t._v(" Refresh Semua Penjualan ")]),a("hr"),t.loading?a("div",{staticClass:"d-flex justify-content-center"},[t._m(1)]):a("div",{staticStyle:{height:"700px","overflow-y":"auto"}},t._l(t.pendingSaleList,(function(e){return a("Sale",{key:e.id,attrs:{"transaction-date":e.initialDepositDate,"sale-id":e.saleId,customer:e.customer,paid:e.fullyPaid},on:{selectSale:t.selectSale}})})),1)]),a("div",{staticClass:"col mt-5"},[a("SaleDetails",{attrs:{sale:t.selectedSale,"print-invoice":t.printInvoice},on:{resetSelectedSale:t.resetSelectedSale,updateSale:t.updateSale,donePrinting:function(e){return t.updatePendingSalesList(!1)}}})],1)])])},wt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"spinner-border",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[t._v("Loading...")])])}],St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card mb-3"},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v(" "+t._s(t.customer.firstName)+" "+t._s(t.customer.lastName)+" "),a("span",{staticClass:"small text-muted",staticStyle:{"font-size":"65% !important"}},[t._v(" "+t._s(new Date(t.transactionDate).toDateString())+" ")])]),a("p",{staticClass:"card-text"},[t._v("Nomor Telepon: "+t._s(t.customer.phoneNumber))]),a("p",{staticClass:"card-text"},[t._v("Pembayaran Lunas: "),a("i",{class:t.iconClass})]),a("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button"},on:{click:function(e){return t.$emit("selectSale",t.saleId)}}},[t._v(" Pilih Penjualan ")])])])},Et=[],Nt={name:"PendingSale",props:["transactionDate","customer","paid","saleId"],computed:{iconClass:function(){return this.paid?"bi bi-check-circle-fill text-success":"bi bi-x-circle-fill text-danger"}}},xt=Nt,kt=Object(n["a"])(xt,St,Et,!1,null,null,null),At=kt.exports,Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loadTemplate?a("div",[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header d-flex justify-content-between align-items-center"},[t._m(0),a("div",{staticClass:"div "},[a("button",{staticClass:"btn",staticStyle:{"padding-top":"0px !important"},on:{click:function(e){return t.$emit("resetSelectedSale")}}},[a("i",{staticClass:"bi bi-x",staticStyle:{"font-size":"1.5rem"}})])])]),a("div",{staticClass:"card-body"},[a("ul",{staticClass:"list-group mb-2"},[a("li",{staticClass:"list-group-item ",class:t.listTitleClassName},[t._v(" "+t._s(t.sale.customer.firstName)+" "+t._s(t.sale.customer.lastName)+" - "),a("strong",[t._v(" Pembayaran "+t._s(t.sale.fullyPaid?"Sudah":"Belum")+" Lunas ")])]),a("li",{staticClass:"list-group-item"},[t._v("ID Penjualan: "+t._s(t.sale.saleId))]),a("li",{staticClass:"list-group-item"},[t._v(" Tanggal Deposit Awal: "),a("strong",[t._v(" "+t._s(new Date(t.sale.initialDepositDate).toDateString())+" ")])]),a("li",{staticClass:"list-group-item"},[t._v(" Jenis Deposit Awal: "),a("strong",[t._v(" "+t._s(t.sale.initialDepositType)+" ")])]),a("li",{staticClass:"list-group-item"},[t._v(" Jumlah Deposit Awal: "),a("strong",[t._v(" Rp "+t._s(t.sale.initialDepositAmount)+" ")])]),t.sale.fullyPaid?t._e():a("li",{staticClass:"list-group-item"},[t._v(" Jumlah Sisa: "),a("strong",[t._v(" Rp "+t._s(t.amountDue)+" ")])]),a("li",{staticClass:"list-group-item"},[t._v(" Harga Total: "),a("strong",[t._v(" Rp "+t._s(t.sale.grandTotal)+" ")])]),a("li",{staticClass:"list-group-item"},[t._v(" Sales Remarks: "),a("strong",[t._v(" "+t._s(t.saleRemarks)+" ")])])]),a("table",{staticClass:"table table-striped table-hover"},[a("thead",{staticClass:"thead-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Produk")]),a("th",{attrs:{scope:"col"}},[t._v("Kuantitas")]),t.canRefund?a("th",{attrs:{scope:"col"}},[t._v("Actions")]):t._e()])]),a("tbody",t._l(t.sale.saleDetailList,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.product.productId))]),a("td",[t._v(t._s(e.quantity))]),t.canRefund?a("td",[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isReturned,expression:"item.isReturned"}],staticClass:"form-check-input",attrs:{id:"refundCheckbox_"+e.product.productId,type:"checkbox"},domProps:{checked:Array.isArray(e.isReturned)?t._i(e.isReturned,null)>-1:e.isReturned},on:{change:function(a){var s=e.isReturned,r=a.target,i=!!r.checked;if(Array.isArray(s)){var n=null,o=t._i(s,n);r.checked?o<0&&t.$set(e,"isReturned",s.concat([n])):o>-1&&t.$set(e,"isReturned",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(e,"isReturned",i)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"refundCheckbox_"+e.product.productId}},[t._v("Refund item")])])]):t._e()])})),0)]),t.canRefund?a("div",[a("button",{staticClass:"btn btn-danger btn-block",attrs:{"data-toggle":"modal","data-target":"#completionModal"}},[t._v(" Refund Sale ")])]):a("div",[t.sale.fullyPaid?a("button",{staticClass:"btn btn-success btn-block",on:{click:function(e){return t.$emit("updateSale",t.selectedInStorePaymentType,t.amountDue)}}},[t._v(" Terima Barang ")]):a("button",{staticClass:"btn btn-primary btn-block",attrs:{"data-toggle":"modal","data-target":"#completionModal"}},[t._v(" Bayar dan Terima ")])])])]),a("div",{staticClass:"modal fade",attrs:{id:"completionModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v(t._s(t.modalTitle))]),t._m(1)]),a("div",{staticClass:"modal-body"},[t.canRefund?a("div",[a("strong",[t._v(" Are you sure you want to issue this refund? ")]),a("form",{ref:"refundForm"},[a("div",{staticClass:"form-group mt-2"},[a("label",{attrs:{for:"remarks"}},[t._v("Remarks")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.remarks,expression:"remarks",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"remarks",required:""},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])])]):a("div",[a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("label",{staticClass:"form-label",attrs:{for:"paymentAmount"}},[t._v(" Payment Amount ")]),a("input",{staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:t.amountDue}})])]),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label",attrs:{for:"Payment Type"}},[t._v(" Jenis Pembayaran ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedInStorePaymentType,expression:"selectedInStorePaymentType"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedInStorePaymentType=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v("Jenis Pembayaran")]),t._l(t.inStorePaymentType,(function(e){return a("option",{key:e.id},[t._v(" "+t._s(e)+" ")])}))],2)]),"Cash"!=t.selectedInStorePaymentType&&t.selectedInStorePaymentType?a("div",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"paymentTypeNameInput"}},[t._v("Bank Name")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.bankName,expression:"bankName",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"paymentTypeNameInput"},domProps:{value:t.bankName},on:{input:function(e){e.target.composing||(t.bankName=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"accountNumberInput"}},[t._v("Account Number")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.accountNumber,expression:"accountNumber",modifiers:{number:!0}}],staticClass:"form-control",attrs:{minlength:"4",maxlength:"4",type:"number",id:"accountNumberInput",placeholder:"0000","aria-describedby":"accountNumberHelp"},domProps:{value:t.accountNumber},on:{input:function(e){e.target.composing||(t.accountNumber=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"accountNumberHelp"}},[t._v("This should contain the last 4 digits")])])]):t._e()])])])]),a("div",{staticClass:"modal-footer"},[t.printInvoice?t._e():a("button",{staticClass:"btn btn-success",attrs:{disabled:t.disablePaymentBtn,type:"button","data-dismiss":t.isFormValid()?"modal":""},on:{click:t.confirmAction}},[t._v(" Confirm ")]),t.printInvoice?a("button",{staticClass:"btn btn-primary",attrs:{"data-dismiss":"modal",type:"button",href:"#invoiceModal","data-toggle":"modal"}},[t._v(" Print invoice ")]):t._e()])])])]),a("Invoice",{attrs:{customer:t.currentCustomer,"employee-name":"some employee name",products:t.productIds,"payment-type":t.selectedInStorePaymentType,"account-num":t.accountNumber,"total-amt":t.sale.grandTotal,"net-amt":t.amountDue,"deposit-amt":t.amountDue,"discount-percentage":t.discountPercentage,"updated-prescription":t.prescription,"new-sale-id":t.sale.saleId,"fully-paid":!0},on:{donePrinting:function(e){return t.$emit("donePrinting")}}})],1):t._e()},$t=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div align-self-center"},[a("h4",[t._v(" Detail Penjualan ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Lt=(a("4de4"),a("2ca0"),{name:"SaleDetail",props:["sale","canRefund","printInvoice"],components:{Invoice:st},data:function(){return{inStorePaymentType:["Cash","Debit","Credit"],selectedInStorePaymentType:"",remarks:"",bankName:"",accountNumber:""}},computed:{currentCustomer:function(){return this.sale.customer},prescription:function(){if(!this.currentCustomer)return null;var t=this.currentCustomer,e=t.leftEyeAxis,a=t.leftEyeAdd,s=t.leftEyeCylinder,r=t.leftEyePrism,i=t.leftEyeSphere,n=t.rightEyeAxis,o=t.rightEyeAdd,l=t.rightEyeCylinder,c=t.rightEyePrism,u=t.rightEyeSphere,d=t.pupilDistance;return{leftEyeAxis:e,leftEyeAdd:a,leftEyeCylinder:s,leftEyePrism:r,leftEyeSphere:i,rightEyeAxis:n,rightEyeAdd:o,rightEyeCylinder:l,rightEyePrism:c,rightEyeSphere:u,pupilDistance:d}},discountPercentage:function(){return this.sale.promotion?this.sale.promotion.percentage:0},loadTemplate:function(){return null!=this.sale},listTitleClassName:function(){return this.sale.fullyPaid?"list-group-item-success":"list-group-item-danger"},validPaymentInfo:function(){return"Cash"===this.selectedInStorePaymentType||this.accountNumber&&this.bankName&&4===this.accountNumber.toString().length},disablePaymentBtn:function(){return!this.validPaymentInfo&&!this.canRefund},amountDue:function(){return(this.sale.grandTotal-this.sale.initialDepositAmount).toFixed(2)},modalTitle:function(){return this.canRefund?"Refund Sale":"Payment"},saleRemarks:function(){var t;return null!==(t=this.sale.saleRemarks)&&void 0!==t?t:"N/A"},productIds:function(){var t=this.sale.saleDetailList.filter((function(t){var e=t.product;return e.productId.startsWith("F")})).map((function(t){var e=t.product,a=t.quantity;return{productId:e.productId,name:e.productName,quantity:a}})),e=this.sale.saleDetailList.filter((function(t){var e=t.product;return e.productId.startsWith("L")})).map((function(t){var e=t.product,a=t.quantity;return{productId:e.productId,name:e.productName,quantity:a}})),a=this.sale.saleDetailList.filter((function(t){var e=t.product;return e.productId.startsWith("CL")})).map((function(t){var e=t.product,a=t.quantity;return{productId:e.productId,name:e.productName,quantity:a}}));return{frames:t,lenses:e,customLenses:a}}},methods:{isFormValid:function(){return!!this.$refs.refundForm&&this.$refs.refundForm.checkValidity()},confirmAction:function(){if(this.canRefund){if(!this.isFormValid())return void this.$refs.refundForm.reportValidity();this.$emit("updateSale",this.remarks)}else{var t=this.selectedInStorePaymentType;"Cash"!==this.selectedInStorePaymentType&&(t+=",".concat(this.bankName,",").concat(this.accountNumber)),console.log(t),this.$emit("updateSale",t,this.amountDue)}}}}),Tt=Lt,qt=(a("4edb"),Object(n["a"])(Tt,Dt,$t,!1,null,"74c3344e",null)),Vt=qt.exports,jt="https://owl-backend-server.herokuapp.com/posEndpoint",Rt={name:"PendingSales",data:function(){return{selectedSale:null,pendingSaleList:[],alertMsg:"",showAlert:!1,loading:!0,alertClass:"alert-info",printInvoice:!1}},components:{Sale:At,SaleDetails:Vt},created:function(){this.updatePendingSalesList()},methods:{updatePendingSalesList:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.resetSelectedSale(),this.loading=!0,h.a.get("".concat(jt,"/getPendingSaleList?storeId=").concat(S.storeId)).then((function(a){e&&(0===a.data.length?(t.alertMsg="No pending sales",t.alertClass="alert-warning"):(t.alertMsg="Received ".concat(a.data.length," pending sales"),t.alertClass="alert-success")),t.loading=!1,t.pendingSaleList=Object(p["a"])(a.data),t.showAlert=!0}))["catch"]((function(e){console.log(e),t.loading=!1,t.alertMsg=e.response.data,t.alertClass="alert-danger"}))},selectSale:function(t){this.selectedSale=w.a.find(this.pendingSaleList,(function(e){return e.saleId===t}))},resetSelectedSale:function(){this.selectedSale=null,this.printInvoice=!1},updateSale:function(t,e){var a=this,s=(new Date).toISOString(),r={saleId:this.selectedSale.saleId,pickUpDate:s};this.selectedSale.fullyPaid||(r.finalPaymentDate=s,r.finalPaymentType=t,r.finalPaymentAmount=parseFloat(e)),h.a.post("".concat(jt,"/updateSale?storeId=").concat(S.storeId),r).then((function(t){a.selectedSale.fullyPaid?a.updatePendingSalesList(!1):(alert("".concat(t.data,". Please print the invoice.")),a.printInvoice=!0),a.alertMsg=t.data,a.alertClass="alert-success"}))["catch"]((function(t){console.log(t),alert("Sale could not be updated please try again"),a.alertMsg="Sale could not be updated please try again",a.alertClass="alert-warning"}))}}},Mt=Rt,Ot=Object(n["a"])(Mt,It,wt,!1,null,null,null),Bt=Ot.exports,Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("router-view")],1)},Qt=[],Kt={name:"Shipments"},Ht=Kt,Ut=Object(n["a"])(Ht,Ft,Qt,!1,null,null,null),zt=Ut.exports,Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-3"},[t.alertMsg?a("div",{staticClass:"alert alert-success alert-dismissible fade show",attrs:{role:"alert"}},[t._v(" "+t._s(t.alertMsg)+" "),t._m(0)]):t._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("h3",[t._v("Refund Sales")]),a("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:t.updateRecentSalesList}},[t._v(" Refresh Sales ")]),a("hr"),t.loading?a("div",{staticClass:"d-flex justify-content-center"},[t._m(1)]):a("div",{staticStyle:{height:"700px","overflow-y":"auto"}},t._l(t.recetSalesList,(function(e){return a("Sale",{key:e.id,attrs:{"transaction-date":e.initialDepositDate,"sale-id":e.saleId,customer:e.customer,paid:e.fullyPaid},on:{selectSale:t.selectSale}})})),1)]),a("div",{staticClass:"col mt-5"},[a("SaleDetails",{attrs:{sale:t.selectedSale,canRefund:!0},on:{resetSelectedSale:t.resetSelectedSale,updateSale:t.updateSale}})],1)])])},Yt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"spinner-border",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[t._v("Loading...")])])}],Gt="https://owl-backend-server.herokuapp.com/posEndpoint",Wt={name:"Refunds",data:function(){return{selectedSale:null,recetSalesList:[],alertMsg:"",loading:!1}},components:{Sale:At,SaleDetails:Vt},created:function(){this.updateRecentSalesList()},methods:{updateRecentSalesList:function(){var t=this;this.loading=!0,h.a.get("".concat(Gt,"/getRecentSalesList?storeId=").concat(S.storeId)).then((function(e){t.recetSalesList=e.data.map((function(t){var e=t.saleDetailList.map((function(t){return Object(v["a"])({isReturned:!0},t)}));return Object(v["a"])(Object(v["a"])({},t),{},{saleDetailList:e})})),t.loading=!1}))["catch"]((function(t){return console.log(t)}))},selectSale:function(t){this.selectedSale=w.a.find(this.recetSalesList,(function(e){return e.saleId===t}))},resetSelectedSale:function(){this.selectedSale=null},updateSale:function(t){var e=this,a={saleId:this.selectedSale.saleId,remarks:t,refundedProducts:this.selectedSale.saleDetailList};h.a.post("".concat(Gt,"/refundSale"),a).then((function(t){e.updateRecentSalesList(),e.selectedSale=null,e.alertMsg=t.data}))["catch"]((function(t){return console.log(t)}))}}},Xt=Wt,Zt=Object(n["a"])(Xt,Jt,Yt,!1,null,null,null),te=Zt.exports,ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid mt-2"},[t.statusMessage?a("div",{staticClass:"alert alert-warning alert-dismissible fade show",attrs:{role:"alert"}},[a("span",[t._v(t._s(t.statusMessage))]),t._m(0)]):t._e(),a("h1",[t._v("Buat Kiriman antar toko")]),a("hr"),a("br"),a("form",{on:{submit:function(e){return t.createShipment(e)}}},[a("h4",[t._v("Pilih Toko Destinasi:")]),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.destinationId,expression:"destinationId"}],staticClass:"custom-select custom-select-lg mb-3",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.destinationId=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("Pilih toko")]),t._l(t.stores,(function(e){return a("option",{key:e.id,domProps:{value:e.storeId}},[t._v(" "+t._s(e.name)+" ")])}))],2)]),a("div",{staticClass:"col"})]),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-primary mr-2",attrs:{type:"button"},on:{click:t.addBarcodeInput}},[t._v(" Tambah Produk "),a("svg",{staticClass:"bi bi-plus-circle-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"}})])])])]),t._l(t.products,(function(e,s){return a("div",{key:e.id,staticClass:"mb-3 row"},[a("div",{staticClass:"col"},[a("label",{staticClass:"form-label",attrs:{for:"ProductId"}},[t._v("Barcode")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.productId,expression:"product.productId",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":e.barcodeError&&null!=e.barcodeError,"is-valid":null===e.barcodeError},attrs:{type:"text","aria-label":"Product","aria-describedby":"productId",required:""},domProps:{value:e.productId},on:{change:function(e){return t.validateBarcode(s)},input:function(a){a.target.composing||t.$set(e,"productId",a.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("small",{staticClass:"form-text text-danger"},[t._v(" "+t._s(e.barcodeError)+" ")])]),a("div",{staticClass:"col"},[a("label",{staticClass:"form-label",attrs:{for:"Quantity"}},[t._v("Kuantitas")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.quantity,expression:"product.quantity",modifiers:{number:!0}}],staticClass:"form-control",class:{"is-invalid":e.quantityError&&null!=e.quantityError,"is-valid":null===e.quantityError},attrs:{type:"number","aria-label":"ProductQuantity","aria-describedby":"productQuantity",min:"1",max:e.availableAmt,disabled:e.barcodeError||!e.productId},domProps:{value:e.quantity},on:{change:function(e){return t.validateProductQuantity(s)},input:function(a){a.target.composing||t.$set(e,"quantity",t._n(a.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("small",{staticClass:"form-text text-danger"},[t._v(" "+t._s(e.quantityError)+" ")])]),a("div",{staticClass:"col-2"},[a("label",{staticClass:"form-label",attrs:{for:"Remove Product"}},[t._v(" Batalkan Produk ")]),a("button",{staticClass:"btn btn-danger form-control",attrs:{type:"button"},on:{click:function(e){return t.removeProduct(s)}}},[a("svg",{staticClass:"bi bi-dash-circle-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1h-7z"}})])])])])})),t._m(1)],2)])},ae=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-4 align-middle"},[a("button",{staticClass:"btn btn-danger form-control",attrs:{type:"submit"}},[t._v(" Buat Kiriman baru ")])])])}],se="https://owl-backend-server.herokuapp.com",re={name:"CreateShipment",data:function(){return{statusMessage:"",destinationId:0,stores:[],products:[],barcode:null}},created:function(){var t=this;h.a.get("".concat(se,"/hoStoresEndpoint/getAllStores")).then((function(e){t.stores=e.data.filter((function(t){return t.storeId!=S.storeId}))}))["catch"]((function(t){return console.log(t)}))},computed:{formHasErrors:function(){var t=w.a.some(this.products,(function(t){return t.barcodeError||t.quantityError}));return t}},methods:{addBarcodeInput:function(){this.products.push({productId:"",quantity:1,barcodeError:"",quantityError:"",availableAmt:1,name:""})},validateBarcode:function(t){var e=this.products[t];e&&h.a.get("".concat(se,"/posEndpoint/getInStoreProductQuantity?storeId=").concat(S.storeId,"&productId=").concat(e.productId)).then((function(t){var a=t.data,s=a.quantity,r=a.productName;e.availableAmt=s,e.name=r,e.barcodeError=null,e.quantityError=null}))["catch"]((function(t){console.error(t),e.barcodeError="No such barcode exists",e.quantityError="",e.price=0,e.availableAmt=1,e.quantity=1,e.name=""}))},validateProductQuantity:function(t){var e=this.products[t];if(e){if(!e.productId)return void(e.barcodeError="Please enter a barcode");e.quantity>e.availableAmt?e.quantityError="Quantity requested is more than what is available in store":(e.barcodeError=null,e.quantityError=null)}},removeProduct:function(t){this.products.splice(t,1)},createShipment:function(t){if(t.preventDefault(),this.formHasErrors)alert("Form has error: ");else if(0===this.products.length)alert("No products added to shipment");else{var e=this.products.map((function(t){return{productId:t.productId,quantity:t.quantity}})),a={originType:3,destinationType:3,originId:S.storeId,destinationId:this.destinationId,shipmentDetailList:e};h.a.post("".concat(se,"/posEndpoint/newTransferShipment"),a).then((function(t){alert(t.data)}))["catch"]((function(t){return alert(t)}))}}}},ie=re,ne=Object(n["a"])(ie,ee,ae,!1,null,null,null),oe=ne.exports,le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid mt-2"},[a("h1",[t._v("Terima Kiriman")]),a("hr"),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("label",{attrs:{for:"barcode"}},[t._v("Scan barcode")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.barcode,expression:"barcode",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number",min:"1",id:"barcode"},domProps:{value:t.barcode},on:{input:function(e){e.target.composing||(t.barcode=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),a("div",{staticClass:"row "},[a("div",{staticClass:"col d-flex justify-content-center"},[a("button",{staticClass:"btn btn-primary",attrs:{disabled:t.disableBtn},on:{click:t.confirm}},[t._v(" Cek kode kiriman ")])])])])},ce=[],ue="https://owl-backend-server.herokuapp.com/posEndpoint/receiveShipment",de={name:"ReceiveShipments",data:function(){return{barcode:null}},computed:{disableBtn:function(){return!this.barcode}},methods:{confirm:function(){var t=this;h.a.post(ue,{storeId:S.storeId,shipmentId:this.barcode,receivedDate:(new Date).toISOString()}).then((function(e){alert(e.data),t.barcode=null}))["catch"]((function(t){alert("Server error: ".concat(t.response.data.message," . Please try again"))}))}}},me=de,pe=Object(n["a"])(me,le,ce,!1,null,null,null),ve=pe.exports,fe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-3 "},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("b-table",{attrs:{data:t.products,striped:!0,hoverable:!0,"default-sort-direction":"asc",paginated:!0,"pagination-rounded":!0,loading:t.loading,"per-page":25,"aria-next-label":"Next page","aria-previous-label":"Previous page","aria-page-label":"Page","aria-current-label":"Current page"}},[a("b-table-column",{attrs:{field:"product.productId",label:"SKU #",sortable:"",searchable:t.searchable},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.product.productId)+" ")]}}])}),a("b-table-column",{attrs:{field:"product.productName",label:"Name Produk",sortable:"",searchable:t.searchable},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.product.productName)+" ")]}}])}),a("b-table-column",{attrs:{field:"inStoreQuantity",label:"Quantitas Produk",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.instoreQuantity)+" ")]}}])}),a("b-table-column",{attrs:{field:"setStoreQuantity",label:"Quantitas Ditetapkan",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.setQuantity)+" ")]}}])})],1)],1)])])},he=[],be=a("c074"),_e=a("ecee");_e["c"].add(be["c"],be["b"],be["a"]);var ye="https://owl-backend-server.herokuapp.com",Ce={name:"StoreInventory",data:function(){return{products:[],loading:!1,searchable:!0}},created:function(){var t=this;h.a.get("".concat(ye,"/hoStoresEndpoint/getStoreQuantity?storeId=").concat(S.storeId)).then((function(e){t.products=Object(p["a"])(e.data),t.loading=!1}))["catch"]((function(t){return console.log(t)}))}},ge=Ce,Pe=(a("0396"),Object(n["a"])(ge,fe,he,!1,null,null,null)),Ie=Pe.exports;s["a"].use(u["a"]);var we=[{path:"/",name:"home",component:Pt},{path:"/pendingSales",name:"PendingSales",component:Bt},{path:"/salesForm",name:"SalesForm",component:ct},{path:"/employees",name:"Employees",component:ft},{path:"/refunds",name:"Refunds",component:te},{path:"/storeInventory",name:"Store Inventory",component:Ie},{path:"/shipments",component:zt,children:[{path:"CreateShipments",name:"Create Shipments",component:oe},{path:"ReceiveShipments",name:"Receive Shipments",component:ve}]}],Se=new u["a"]({routes:we,mode:"history"});Se.beforeEach((function(t,e,a){"/"!==t.path?S.storeId?a():a({name:"home"}):S.storeId?a({name:"PendingSales"}):a()}));var Ee=Se,Ne=a("ad3d"),xe=a("7155"),ke=a("289d"),Ae=(a("5abe"),a("4989"),a("ab8b"),a("7898")),De=a.n(Ae),$e={name:"_blank",styles:["https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css","https://unpkg.com/kidlat-css/css/kidlat.css"]};s["a"].component("faIcon",Ne["a"]),s["a"].use(De.a,$e),s["a"].use(xe["a"]),ke["a"].setOptions({defaultIconPack:"fas",defaultIconComponent:"faIcon"}),s["a"].config.productionTip=!1,new s["a"]({router:Ee,render:function(t){return t(c)}}).$mount("#app")},"592f":function(t,e,a){},"870b":function(t,e,a){},"992e":function(t,e,a){},be88:function(t,e,a){"use strict";a("c298")},c298:function(t,e,a){},c7ee:function(t,e,a){},cc06:function(t,e,a){"use strict";a("870b")}});
//# sourceMappingURL=app.008e7cf3.js.map