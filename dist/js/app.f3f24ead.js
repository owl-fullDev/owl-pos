(function(t){function e(e){for(var a,n,o=e[0],l=e[1],c=e[2],d=0,m=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&m.push(r[n][0]),r[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(m.length)m.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],a=!0,o=1;o<s.length;o++){var l=s[o];0!==r[l]&&(a=!1)}a&&(i.splice(e--,1),t=n(n.s=s[0]))}return t}var a={},r={app:0},i=[];function n(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=a,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(s,a,function(e){return t[e]}.bind(null,a));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0855":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light"},[s("div",{staticClass:"container-fluid"},[s("span",{staticClass:"navbar-brand mb-0 h1"},[t._v("Owl")]),s("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[s("ul",{staticClass:"navbar-nav me-auto mb-2 mb-lg-0"},[s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/pendingSales","active-class":"nav-link"}},[t._v(" Pending Sales ")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/salesForm","active-class":"nav-link"}},[t._v(" POS ")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/shipments","active-class":"nav-link"}},[t._v(" Shipments ")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/Employees","active-class":"nav-link"}},[t._v(" Employees ")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/refunds","active-class":"nav-link"}},[t._v(" Refunds ")])],1)])])])]),s("router-view")],1)},i=[],n=s("2877"),o={},l=Object(n["a"])(o,r,i,!1,null,null,null),c=l.exports,u=s("8c4f"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid mt-2"},[t.loading?s("div",{staticClass:"d-flex justify-content-center",attrs:{id:"overlay"}},[t._m(0)]):t._e(),s("h1",[t._v("Create Sale")]),s("form",{staticClass:"mt-3",attrs:{id:"saleForm"}},[s("h3",[t._v("Customer information")]),s("hr"),s("customer-list",{directives:[{name:"show",rawName:"v-show",value:!t.createNewCustomer,expression:"!createNewCustomer"}],attrs:{list:t.customerList},on:{selectCustomer:t.setCustomerInfo}}),s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col-6"},[s("div",{staticClass:"mb-3 row"},[s("div",{staticClass:"col"},[s("label",{staticClass:"form-label",attrs:{for:"CustomerName"}},[t._v(" Customer First Name ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.firstName,expression:"firstName",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"firstName",required:""},domProps:{value:t.firstName},on:{input:function(e){e.target.composing||(t.firstName=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),s("div",{staticClass:"mb-3 row"},[s("div",{staticClass:"col"},[s("label",{staticClass:"form-label",attrs:{for:"CustomerName"}},[t._v(" Customer Last Name ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.lastName,expression:"lastName",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"lastName",required:""},domProps:{value:t.lastName},on:{input:function(e){e.target.composing||(t.lastName=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),s("div",{staticClass:"mb-3 row"},[s("div",{staticClass:"col"},[s("button",{staticClass:"btn btn-info mr-5",attrs:{type:"button",disabled:t.loading},on:{click:t.searchCustomerByName}},[t._v(" Search By Customer First and Last name ")]),s("div",{staticClass:"form-check d-inline-block"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.createNewCustomer,expression:"createNewCustomer"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"createNewCustomer",id:"createNewCustomer",disabled:t.loading},domProps:{checked:Array.isArray(t.createNewCustomer)?t._i(t.createNewCustomer,null)>-1:t.createNewCustomer},on:{click:t.resetCustomerInfo,change:function(e){var s=t.createNewCustomer,a=e.target,r=!!a.checked;if(Array.isArray(s)){var i=null,n=t._i(s,i);a.checked?n<0&&(t.createNewCustomer=s.concat([i])):n>-1&&(t.createNewCustomer=s.slice(0,n).concat(s.slice(n+1)))}else t.createNewCustomer=r}}}),s("label",{staticClass:"form-check-label",attrs:{for:"createNewCustomer"}},[t._v(" Create New Customer ")])])])]),s("div",{staticClass:"mb-3 row"},[s("div",{staticClass:"col"},[s("label",{staticClass:"form-label",attrs:{for:"CustomerPhone"}},[t._v(" Customer Phone ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneNum,expression:"phoneNum"}],staticClass:"form-control",attrs:{type:"text",name:"phoneNumber",required:""},domProps:{value:t.phoneNum},on:{input:function(e){e.target.composing||(t.phoneNum=e.target.value)}}})])]),s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col"},[s("button",{staticClass:"btn btn-info mr-5",attrs:{type:"button",disabled:t.loading},on:{click:t.searchCustomerByPhone}},[t._v(" Search by Customer Phone # ")])])]),t.showCustomerInfo?s("div",[s("div",{staticClass:"mb-3 row"},[s("div",{staticClass:"col"},[s("label",{staticClass:"form-label",attrs:{for:"CustomerEmail"}},[t._v(" Customer Email ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",name:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])])]):t._e()])]),s("Prescription",{ref:"prescriptionElem",attrs:{"show-prescription":t.showCustomerInfo}}),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("h3",[t._v("Product info")]),s("hr"),s("div",{staticClass:"row",class:{"d-none":t.productIds.frames.length<1}},[t._m(1)]),t._l(t.productIds.frames,(function(e,a){return s("div",{key:e.id,staticClass:"mb-3 row"},[s("div",{staticClass:"col"},[s("label",{staticClass:"form-label",attrs:{for:"ProductId"}},[t._v("Frame Barcode")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.productId,expression:"product.productId",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":e.barcodeError&&null!=e.barcodeError,"is-valid":null===e.barcodeError},attrs:{type:"text","aria-label":"Product","aria-describedby":"productId",required:""},domProps:{value:e.productId},on:{change:function(e){return t.validateBarcodeInput(a,"frame")},input:function(s){s.target.composing||t.$set(e,"productId",s.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("small",{staticClass:"form-text text-danger"},[t._v(" "+t._s(e.barcodeError)+" ")])]),s("div",{staticClass:"col"},[s("label",{staticClass:"form-label",attrs:{for:"Quantity"}},[t._v("Quantity")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.quantity,expression:"product.quantity",modifiers:{number:!0}}],staticClass:"form-control",class:{"is-invalid":e.quantityError&&null!=e.quantityError,"is-valid":null===e.quantityError},attrs:{type:"number","aria-label":"ProductQuantity","aria-describedby":"productQuantity",min:"1",max:e.availableAmt,disabled:e.barcodeError||!e.productId},domProps:{value:e.quantity},on:{change:function(e){return t.validateInputQuantity(a,"frame")},input:function(s){s.target.composing||t.$set(e,"quantity",t._n(s.target.value))},blur:function(e){return t.$forceUpdate()}}}),s("small",{staticClass:"form-text text-danger"},[t._v(" "+t._s(e.quantityError)+" ")])]),s("div",{staticClass:"col-2"},[s("label",{staticClass:"form-label",attrs:{for:"Remove Product"}},[t._v(" Remove Product ")]),s("button",{staticClass:"btn btn-danger form-control",attrs:{type:"button"},on:{click:function(e){return t.removeFrameInput(a)}}},[s("svg",{staticClass:"bi bi-dash-circle-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[s("path",{attrs:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1h-7z"}})])])])])})),s("div",{staticClass:"row",class:{"d-none":t.productIds.lenses.length<1}},[t._m(2)]),t._l(t.productIds.lenses,(function(e,a){return s("div",{key:e.id,staticClass:"mb-3 row"},[s("div",{staticClass:"col"},[s("label",{staticClass:"form-label",attrs:{for:"ProductId"}},[t._v("Lens Barcode")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.productId,expression:"product.productId",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":e.barcodeError&&null!=e.barcodeError,"is-valid":null===e.barcodeError},attrs:{type:"text","aria-label":"Product","aria-describedby":"productId",required:""},domProps:{value:e.productId},on:{change:function(e){return t.validateBarcodeInput(a,"lens")},input:function(s){s.target.composing||t.$set(e,"productId",s.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("small",{staticClass:"form-text text-danger"},[t._v(" "+t._s(e.barcodeError)+" ")])]),s("div",{staticClass:"col"},[s("label",{staticClass:"form-label",attrs:{for:"Quantity"}},[t._v("Quantity")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.quantity,expression:"product.quantity",modifiers:{number:!0}}],staticClass:"form-control",class:{"is-invalid":e.quantityError&&null!=e.quantityError,"is-valid":null===e.quantityError},attrs:{type:"number","aria-label":"ProductQuantity","aria-describedby":"productQuantity",min:"1",max:e.availableAmt,disabled:e.barcodeError||!e.productId},domProps:{value:e.quantity},on:{change:function(e){return t.validateInputQuantity(a,"lens")},input:function(s){s.target.composing||t.$set(e,"quantity",t._n(s.target.value))},blur:function(e){return t.$forceUpdate()}}}),s("small",{staticClass:"form-text text-danger"},[t._v(" "+t._s(e.quantityError)+" ")])]),s("div",{staticClass:"col-2"},[s("label",{staticClass:"form-label",attrs:{for:"Remove Product"}},[t._v(" Remove Product ")]),s("button",{staticClass:"btn btn-danger form-control",attrs:{type:"button"},on:{click:function(e){return t.removeStockLensInput(a)}}},[s("svg",{staticClass:"bi bi-dash-circle-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[s("path",{attrs:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1h-7z"}})])])])])})),s("div",{staticClass:"row",class:{"d-none":t.productIds.customLenses.length<1}},[t._m(3)]),t._l(t.productIds.customLenses,(function(e,a){return s("div",{key:e.id,staticClass:"mb-3 row"},[s("div",{staticClass:"col"},[s("label",{staticClass:"form-label",attrs:{for:"productId"}},[t._v("Custom Lens")]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.productId,expression:"product.productId"}],staticClass:"form-control",on:{change:[function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"productId",s.target.multiple?a:a[0])},function(e){return t.setLensDetails(a)}]}},[s("option",{attrs:{selected:"",disabled:"",value:""}},[t._v("Select Custom Lens")]),t._l(t.customLenses,(function(e){return s("option",{key:e.id,domProps:{value:e.productId}},[t._v(" "+t._s(e.productName)+" ")])}))],2)]),s("div",{staticClass:"col"},[s("label",{staticClass:"form-label",attrs:{for:"Quantity"}},[t._v("Quantity")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.quantity,expression:"product.quantity",modifiers:{number:!0}}],staticClass:"form-control",class:{"is-invalid":e.error&&null!=e.error,"is-valid":null===e.error},attrs:{type:"number","aria-label":"ProductQuantity","aria-describedby":"productQuantity",min:"1",max:e.availableAmt,disabled:!e.productId},domProps:{value:e.quantity},on:{change:function(e){return t.validateInputQuantity(a,"customLens")},input:function(s){s.target.composing||t.$set(e,"quantity",t._n(s.target.value))},blur:function(e){return t.$forceUpdate()}}}),s("small",{staticClass:"form-text text-danger"},[t._v(" "+t._s(e.error)+" ")])]),s("div",{staticClass:"col-2"},[s("label",{staticClass:"form-label",attrs:{for:"Remove Product"}},[t._v(" Remove Product ")]),s("button",{staticClass:"btn btn-danger form-control",attrs:{type:"button"},on:{click:function(e){return t.removeCustomLensInput(a)}}},[s("svg",{staticClass:"bi bi-dash-circle-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[s("path",{attrs:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1h-7z"}})])])])])})),s("div",{staticClass:"mb3 row"},[s("div",{staticClass:"col d-flex justify-content-center"},[s("button",{staticClass:"btn btn-primary mr-2",attrs:{type:"button"},on:{click:function(e){return t.addBarcodeInput("frame")}}},[t._v(" Add Frame "),s("svg",{staticClass:"bi bi-plus-circle-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[s("path",{attrs:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"}})])]),s("button",{staticClass:"btn btn-primary mr-2",attrs:{type:"button"},on:{click:function(e){return t.addBarcodeInput("lens")}}},[t._v(" Add Stock Lens "),s("svg",{staticClass:"bi bi-plus-circle-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[s("path",{attrs:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"}})])]),s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.addCustomLensInput}},[t._v(" Add Custom Lens "),s("svg",{staticClass:"bi bi-plus-circle-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[s("path",{attrs:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"}})])])])])],2)]),s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col"},[s("h3",[t._v("Promotion")]),s("hr"),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedPromotion,expression:"selectedPromotion"}],staticClass:"form-control",attrs:{"aria-label":"promotion selection",required:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedPromotion=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"0"}},[t._v("No promotion")]),t._l(t.promotions,(function(e){return s("option",{key:e.id,domProps:{value:e.promotionId}},[t._v(" "+t._s(e.name)+" ")])}))],2)])]),t.netAmount?s("div",[t._m(4),s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col"},[s("table",{staticClass:"table"},[t._m(5),s("tbody",[t._l(t.productIds.frames,(function(e){return s("tr",{key:e.id},[s("th",{attrs:{scope:"row"}},[t._v(t._s(e.productId))]),s("td",[t._v(t._s(e.name))]),s("td",[t._v(t._s(e.quantity))]),s("td",[t._v(t._s(e.quantity*e.price))])])})),t._l(t.productIds.lenses,(function(e){return s("tr",{key:e.id},[s("th",{attrs:{scope:"row"}},[t._v(t._s(e.productId))]),s("td",[t._v(t._s(e.name))]),s("td",[t._v(t._s(e.quantity))]),s("td",[t._v(t._s(e.quantity*e.price))])])})),t._l(t.productIds.customLenses,(function(e){return s("tr",{key:e.id},[s("th",{attrs:{scope:"row"}},[t._v(t._s(e.productId))]),s("td",[t._v(t._s(e.name))]),s("td",[t._v(t._s(e.quantity))]),s("td",[t._v(t._s(e.quantity*e.price))])])}))],2)])])])]):t._e(),s("hr"),s("div",{attrs:{id:"costBreakdownDiv"}},[s("div",{staticClass:"row justify-content-end"},[t._m(6),s("div",{staticClass:"col-2 text-right"},[s("span",{staticClass:"text-success align-middle costBreakdown"},[t._v(" "+t._s(t.totalAmount)+" Rupiah ")])])]),s("div",{staticClass:"row justify-content-end"},[t._m(7),s("div",{staticClass:"col-2 text-right"},[s("span",{staticClass:"text-success align-middle costBreakdown"},[t._v(" "+t._s(t.discountName)+" ")])])]),s("div",{staticClass:"row mb-3 justify-content-end"},[t._m(8),s("div",{staticClass:"col-2 text-right"},[s("span",{staticClass:"text-success align-middle costBreakdown"},[t._v(" "+t._s(t.netAmount)+" Rupiah ")])])])]),s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col-4"},[s("h3",[t._v("Employee")]),s("hr"),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedEmployeeId,expression:"selectedEmployeeId"}],staticClass:"form-control",attrs:{"aria-label":"employee selection",required:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedEmployeeId=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:""}},[t._v("Select Employee")]),t._l(t.employees,(function(e){return s("option",{key:e.id,domProps:{value:e.employeeId}},[t._v(" "+t._s(e.firstName)+" "+t._s(e.lastname)+" ("+t._s(e.jobTitle)+") ")])}))],2)])]),s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col-10"}),s("div",{staticClass:"col"},[s("button",{staticClass:"btn btn-primary float-right",attrs:{type:"submit",disabled:t.formHasErrors,"data-toggle":"modal","data-target":"#paymentModal",id:"continueToPaymentBtn"},on:{click:function(e){return t.openPaymentModal(e)}}},[t._v(" Continue ")]),s("button",{staticClass:"btn btn-warning mr-2 float-right",attrs:{type:"reset"},on:{click:t.resetData}},[t._v(" Cancel Sale ")])])])],1),t.showPaymentModal?s("div",{ref:"modal",staticClass:"modal fade",attrs:{id:"paymentModal",tabindex:"-1",role:"dialog","aria-labelledby":"continueToPaymentBtn","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(9),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col"},[s("div",{staticClass:"form-check"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.showDepositInfo,expression:"showDepositInfo"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"showDepositInfo",disabled:t.hasCustomerPaid},domProps:{checked:Array.isArray(t.showDepositInfo)?t._i(t.showDepositInfo,null)>-1:t.showDepositInfo},on:{change:function(e){var s=t.showDepositInfo,a=e.target,r=!!a.checked;if(Array.isArray(s)){var i=null,n=t._i(s,i);a.checked?n<0&&(t.showDepositInfo=s.concat([i])):n>-1&&(t.showDepositInfo=s.slice(0,n).concat(s.slice(n+1)))}else t.showDepositInfo=r}}}),s("label",{staticClass:"form-check-label",attrs:{for:"showDepositInfo"}},[t._v(" Deposit dulu? ")])])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("div",{staticClass:"form-check d-inline-block"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.hasCustomerPaid,expression:"hasCustomerPaid"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"hasCustomerPaid",id:"hasCustomerPaid",disabled:t.showDepositInfo},domProps:{checked:Array.isArray(t.hasCustomerPaid)?t._i(t.hasCustomerPaid,null)>-1:t.hasCustomerPaid},on:{change:function(e){var s=t.hasCustomerPaid,a=e.target,r=!!a.checked;if(Array.isArray(s)){var i=null,n=t._i(s,i);a.checked?n<0&&(t.hasCustomerPaid=s.concat([i])):n>-1&&(t.hasCustomerPaid=s.slice(0,n).concat(s.slice(n+1)))}else t.hasCustomerPaid=r}}}),s("label",{staticClass:"form-check-label",attrs:{for:"hasCustomerPaid"}},[t._v(" Full payment ")])])])]),s("hr"),t.showDepositInfo?s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("h3",[t._v("Deposit Info")]),s("hr"),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("label",{staticClass:"form-label",attrs:{for:"Initial Payment Amount"}},[t._v(" Initial Payment Amount ")]),s("div",{staticClass:"input-group mb-3"},[s("span",{staticClass:"input-group-text",attrs:{id:"rupiah-currency"}},[t._v("Rp")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.initialPaymentAmt,expression:"initialPaymentAmt",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number","aria-label":"initialPaymentAmount","aria-describedby":"rupiah-currency",required:t.showDepositInfo},domProps:{value:t.initialPaymentAmt},on:{input:function(e){e.target.composing||(t.initialPaymentAmt=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])])])])]):t._e(),t.hasCustomerPaid||t.showDepositInfo?s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col"},[s("label",{staticClass:"form-label",attrs:{for:"Payment Type"}},[t._v(" Payment Type ")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedPaymentType,expression:"selectedPaymentType"}],staticClass:"form-control",attrs:{required:t.hasCustomerPaid},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedPaymentType=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:""}},[t._v("Select Payment Type")]),t._l(t.paymentTypes,(function(e){return s("option",{key:e.id},[t._v(" "+t._s(e)+" ")])}))],2)])]):t._e()]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" Cancel ")]),s("button",{staticClass:"btn btn-success",attrs:{type:"button","data-dismiss":"modal",disabled:!t.hasCustomerPaid&&!t.showDepositInfo},on:{click:function(e){return t.createSale()}}},[t._v(" Create Sale ")])])])])]):t._e()])},m=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"spinner-border text-light",staticStyle:{width:"3rem",height:"3rem"},attrs:{id:"loader",role:"status"}},[s("span",{staticClass:"sr-only"},[t._v("Loading...")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col"},[s("h4",[t._v("Frames")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col"},[s("h4",[t._v("Stock Lenses")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col"},[s("h4",[t._v("Custom Lenses")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col"},[s("h5",[t._v("Sale Details")]),s("hr")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",{staticClass:"thead-dark"},[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Item Code")]),s("th",{attrs:{scope:"col"}},[t._v("Item Name")]),s("th",{attrs:{scope:"col"}},[t._v("Qty")]),s("th",{attrs:{scope:"col"}},[t._v("Price(Rupiah)")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-2 text-right"},[s("h4",[t._v("Total Amount:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-2 text-right"},[s("h4",[t._v("Discount:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-2 text-right"},[s("h4",[t._v("Net Amount:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v("Payment")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],p=(s("99af"),s("7db0"),s("d81d"),s("45fc"),s("a434"),s("accc"),s("0d03"),s("b0c0"),s("b680"),s("acd8"),s("4d63"),s("ac1f"),s("25f0"),s("5530")),h=s("2909"),v=s("bc3a"),f=s.n(v),b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.list?s("div",[0===t.list.length?s("div",{staticClass:"alert alert-warning alert-dismissible fade show",attrs:{role:"alert"}},[t._v(" No customers found "),t._m(0)]):t._e(),s("div",{staticClass:"row flex-row flex-nowrap overflow-auto mb-3"},t._l(t.list,(function(e){return s("div",{key:e.id,staticClass:"col"},[s("div",{staticClass:"card card-block"},[s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[t._v(" "+t._s(e.firstName)+" "+t._s(e.lastName)+" ")]),s("p",{staticClass:"card-text"},[t._v("Email: "+t._s(e.email))]),s("p",{staticClass:"card-text"},[t._v("Phone # : "+t._s(e.phoneNumber))]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(s){return t.selectCustomer(e.customerId)}}},[t._v(" Select Customer ")])])])])})),0)]):t._e()},y=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],C={name:"CustomerList",props:{list:Array},methods:{selectCustomer:function(t){this.$emit("selectCustomer",t)}}},g=C,_=(s("c2ff"),Object(n["a"])(g,b,y,!1,null,"60ed4640",null)),I=_.exports,w=s("2ef0"),P=s.n(w),S={storeId:null},E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.showPrescription,expression:"showPrescription"}],staticClass:"row"},[s("div",{staticClass:"col"},[s("div",{staticClass:"mt-3 row"},[s("div",{staticClass:"col"},[s("div",{staticClass:"form-check"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.showPrescriptionInputs,expression:"showPrescriptionInputs"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"prescriptionCheck"},domProps:{checked:Array.isArray(t.showPrescriptionInputs)?t._i(t.showPrescriptionInputs,null)>-1:t.showPrescriptionInputs},on:{change:function(e){var s=t.showPrescriptionInputs,a=e.target,r=!!a.checked;if(Array.isArray(s)){var i=null,n=t._i(s,i);a.checked?n<0&&(t.showPrescriptionInputs=s.concat([i])):n>-1&&(t.showPrescriptionInputs=s.slice(0,n).concat(s.slice(n+1)))}else t.showPrescriptionInputs=r}}}),s("span",{staticClass:"h4 form-check-label",attrs:{for:"prescriptionCheck"}},[t._v(" Prescription ")])])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showPrescriptionInputs,expression:"showPrescriptionInputs"}],staticClass:"row"},[s("div",{staticClass:"col"},[s("h6",[t._v("Right eye")]),s("div",{staticClass:"row mb-3"},[s("PrescriptionInput",{attrs:{name:"Sphere",side:"Right"},model:{value:t.prescriptionValues.rightEyeSphere,callback:function(e){t.$set(t.prescriptionValues,"rightEyeSphere",e)},expression:"prescriptionValues.rightEyeSphere"}}),s("PrescriptionInput",{attrs:{name:"Cylinder",side:"Right"},model:{value:t.prescriptionValues.rightEyeCylinder,callback:function(e){t.$set(t.prescriptionValues,"rightEyeCylinder",e)},expression:"prescriptionValues.rightEyeCylinder"}}),s("PrescriptionInput",{attrs:{name:"Axis",side:"Right"},model:{value:t.prescriptionValues.rightEyeAxis,callback:function(e){t.$set(t.prescriptionValues,"rightEyeAxis",e)},expression:"prescriptionValues.rightEyeAxis"}}),s("PrescriptionInput",{attrs:{name:"Progressive",side:"Right"},model:{value:t.prescriptionValues.rightEyeAdd,callback:function(e){t.$set(t.prescriptionValues,"rightEyeAdd",e)},expression:"prescriptionValues.rightEyeAdd"}}),s("PrescriptionInput",{attrs:{name:"Prism",side:"Right"},model:{value:t.prescriptionValues.rightEyePrism,callback:function(e){t.$set(t.prescriptionValues,"rightEyePrism",e)},expression:"prescriptionValues.rightEyePrism"}}),s("PrescriptionInput",{attrs:{name:"PD",side:"Right"},model:{value:t.prescriptionValues.pupilDistance,callback:function(e){t.$set(t.prescriptionValues,"pupilDistance",e)},expression:"prescriptionValues.pupilDistance"}})],1),s("h6",[t._v("Left eye")]),s("div",{staticClass:"row mb-3"},[s("PrescriptionInput",{attrs:{name:"Sphere",side:"Left"},model:{value:t.prescriptionValues.leftEyeSphere,callback:function(e){t.$set(t.prescriptionValues,"leftEyeSphere",e)},expression:"prescriptionValues.leftEyeSphere"}}),s("PrescriptionInput",{attrs:{name:"Cylinder",side:"Left"},model:{value:t.prescriptionValues.leftEyeCylinder,callback:function(e){t.$set(t.prescriptionValues,"leftEyeCylinder",e)},expression:"prescriptionValues.leftEyeCylinder"}}),s("PrescriptionInput",{ref:"leftEyeAxis",attrs:{name:"Axis",side:"Left"},model:{value:t.prescriptionValues.leftEyeAxis,callback:function(e){t.$set(t.prescriptionValues,"leftEyeAxis",e)},expression:"prescriptionValues.leftEyeAxis"}}),s("PrescriptionInput",{attrs:{name:"Progressive",side:"Left"},model:{value:t.prescriptionValues.leftEyeAdd,callback:function(e){t.$set(t.prescriptionValues,"leftEyeAdd",e)},expression:"prescriptionValues.leftEyeAdd"}}),s("PrescriptionInput",{attrs:{name:"Prism",side:"Left"},model:{value:t.prescriptionValues.leftEyePrism,callback:function(e){t.$set(t.prescriptionValues,"leftEyePrism",e)},expression:"prescriptionValues.leftEyePrism"}}),s("div",{staticClass:"col"})],1)])])])])},x=[],k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col"},[s("div",{staticClass:"form-group mb-2"},[s("label",{staticClass:"form-label"},[t.showSide?s("span",[t._v(t._s(t.side)+" Eye")]):t._e(),t._v(" "+t._s(t.name)+" ")])]),s("div",{staticClass:"row "},t._l(t.inputs,(function(e){return s("div",{key:e.id,staticClass:"col",class:{noPadding:t.inputs.length>1}},[s(e.component,{tag:"component",attrs:{options:t.getValuesForInput(e),default:e.defaultVal},on:{change:t.updateFinalVal}})],1)})),0)])},N=[],A=(s("b65f"),s("5319"),[{name:"Sphere",inputs:[{signValues:["+","-"],component:"SelectInput"},{min:0,max:20,interval:1,component:"SelectInput"},{min:0,max:.75,interval:.25,component:"SelectInput",defaultVal:".00"}]},{name:"Cylinder",inputs:[{signValues:["+","-"],component:"SelectInput"},{min:0,max:5,interval:1,component:"SelectInput"},{min:0,max:.75,interval:.25,component:"SelectInput",defaultVal:".00"}]},{name:"Axis",inputs:[{min:0,max:180,interval:1,component:"SelectInput"}]},{name:"Progressive",inputs:[{min:0,max:3,interval:.25,component:"SelectInput",defaultVal:"0.00"}]},{name:"Prism",inputs:[{placeholder:"Enter Prism Value",component:"TextInput"}]},{name:"PD",inputs:[{min:0,max:200,interval:1,component:"SelectInput"}]}]),$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedVal,expression:"selectedVal"}],staticClass:"custom-select",attrs:{required:""},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedVal=e.target.multiple?s:s[0]},function(e){return t.$emit("change")}]}},t._l(t.options,(function(e){return s("option",{key:e.id,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),0)},D=[],V={name:"SelectInput",props:["options","default"],data:function(){var t;return{selectedVal:null!==(t=this["default"])&&void 0!==t?t:0}}},L=V,q=Object(n["a"])(L,$,D,!1,null,null,null),T=q.exports,j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("input",{directives:[{name:"model",rawName:"v-model",value:t.textVal,expression:"textVal"}],staticClass:"form-control",attrs:{placeholder:t.options,required:""},domProps:{value:t.textVal},on:{input:[function(e){e.target.composing||(t.textVal=e.target.value)},function(e){return t.$emit("change")}]}})},O=[],R={name:"TextInput",props:["options"],data:function(){return{textVal:""}}},B=R,M=Object(n["a"])(B,j,O,!1,null,null,null),F=M.exports,Q={name:"PrescriptionInput",props:["name","side","value"],components:{SelectInput:T,TextInput:F},model:{prop:"value",event:"change"},data:function(){return{prescriptionDetails:null,finalVal:0}},created:function(){this.prescriptionDetails=P.a.find(A,{name:this.name})},computed:{inputs:function(){return this.prescriptionDetails.inputs},showSide:function(){return"PD"!=this.name}},methods:{updateFinalVal:function(){if("Sphere"===this.name||"Cylinder"===this.name){var t=this.$children[0].selectedVal,e=parseFloat(this.$children[1].selectedVal),s=parseFloat(this.$children[2].selectedVal);this.finalVal=parseFloat("".concat(t).concat(e+s))}else"Prism"===this.name?this.finalVal=this.$children[0].textVal:this.finalVal=parseFloat(this.$children[0].selectedVal)},getValuesForInput:function(t){if(t.signValues)return t.signValues;if(t.placeholder)return t.placeholder;for(var e=[],s=t.min;s<=t.max;s+=t.interval){var a=s;.25===t.interval&&(a="Sphere"===this.name||"Cylinder"===this.name?s.toFixed(2).replace(/^0/,""):s.toFixed(2)),e.push(a)}return e}},watch:{finalVal:{handler:function(t){console.log("FINAL VAL CHANGED"),this.$emit("change",t)}},value:{handler:function(t){console.log("VAL CHANGED",t,this.name,this.side),null!==t?(this.finalVal=t,"Sphere"===this.name||"Cylinder"===this.name?(this.$children[0].selectedVal=t<0?"-":"+",this.$children[1].selectedVal=Math.abs(Math.trunc(t)),this.$children[2].selectedVal=Math.abs(t%1).toFixed(2).replace(/^0/,"")):"Prism"===this.name?this.$children[0].textVal=t:.25===this.inputs[0].interval?this.$children[0].selectedVal=t.toFixed(2):this.$children[0].selectedVal=t):this.finalVal=0}}}},z=Q,U=(s("cc06"),Object(n["a"])(z,k,N,!1,null,null,null)),H=U.exports,G={leftEyeSphere:0,leftEyeCylinder:0,leftEyeAxis:0,leftEyeAdd:0,leftEyePrism:0,rightEyeSphere:0,rightEyeCylinder:0,rightEyeAxis:0,rightEyeAdd:0,rightEyePrism:0,pupilDistance:0},J={name:"Prescription",props:["showPrescription"],components:{PrescriptionInput:H},data:function(){return{prescriptionValues:Object(p["a"])({},G),showPrescriptionInputs:!1}},watch:{showPrescriptionInputs:function(t){t||(console.log(t,"HERE",G),Object.assign(this.prescriptionValues,Object(p["a"])({},G)))}}},K=J,W=Object(n["a"])(K,E,x,!1,null,null,null),X=W.exports,Y="https://owl-backend-server.herokuapp.com/posEndpoint",Z=function(){return{loading:!1,productIds:{frames:[],lenses:[],customLenses:[]},customLenses:[],employees:[],selectedEmployeeId:"",firstName:"",lastName:"",phoneNum:"",email:"",promotions:[],selectedPromotion:0,showDepositInfo:!1,initialPaymentAmt:0,paymentTypes:["Cash","Debit","Credit"],selectedPaymentType:"",createNewCustomer:!1,customerList:null,selectedCustomerId:null,hasCustomerPaid:!1,showPaymentModal:!1}},tt={name:"SalesForm",components:{CustomerList:I,Prescription:X},data:Z,created:function(){this.fetchDataFromServer()},computed:{prescription:function(){return this.$refs.prescriptionElem.prescriptionValues},showCustomerInfo:function(){return!(this.customerList||!this.createNewCustomer)||(null!==this.selectedCustomerId||this.createNewCustomer)},discountName:function(){var t=this,e=this.promotions.find((function(e){return e.promotionId==t.selectedPromotion}));return e?e.name:"0%"},totalAmount:function(){var t=0,e=0,s=0,a=0;return(this.productIds.frames.length>0||this.productIds.lenses.length>0||this.productIds.customLenses.length>0)&&(t=P.a.sumBy(this.productIds.frames,(function(t){return t.price*t.quantity})),e=P.a.sumBy(this.productIds.lenses,(function(t){return t.price*t.quantity})),s=P.a.sumBy(this.productIds.customLenses,(function(t){return t.price*t.quantity})),a+=e+t+s),a},netAmount:function(){var t=this,e=this.totalAmount,s=this.promotions.find((function(e){return e.promotionId==t.selectedPromotion}));if(s){var a=e*(s.discountVal/100);e-=a}return parseFloat(e.toFixed(2))},validPhoneNum:function(){var t=new RegExp("^\\d+$");return t.test(this.phoneNum)},formHasErrors:function(){var t=P.a.some(this.productIds.frames,(function(t){return t.barcodeError||t.quantityError})),e=P.a.some(this.productIds.lenses,(function(t){return t.barcodeError||t.quantityError})),s=P.a.some(this.productIds.customLenses,(function(t){return t.error}));return t||e||s}},methods:{fetchDataFromServer:function(){var t=this;f.a.get("".concat(Y,"/getCustomLensList")).then((function(e){t.customLenses=e.data}))["catch"]((function(t){return console.error(t)})),f.a.get("".concat(Y,"/getStorePromotions?storeId=").concat(S.storeId)).then((function(e){var s=e.data;t.promotions=s.map((function(t){return{name:t.promotionName,discountVal:t.percentage,promotionId:t.promotionId}}))}))["catch"]((function(t){return console.error(t)})),f.a.get("".concat(Y,"/getStoreEmployees?storeId=").concat(S.storeId)).then((function(e){t.employees=e.data}))["catch"]((function(t){return console.error(t)}))},resetData:function(){Object.assign(this.$data,Z()),this.fetchDataFromServer()},openPaymentModal:function(t){t.preventDefault();var e=document.getElementById("saleForm");e.checkValidity()?this.showPaymentModal=!0:(this.showPaymentModal=!1,e.reportValidity())},createSale:function(){var t=this;if(!this.formHasErrors){var e=this.productIds.frames.map((function(t){return{productId:t.productId,quantity:t.quantity}})),s=this.productIds.lenses.map((function(t){return{productId:t.productId,quantity:t.quantity}})),a=this.productIds.customLenses.map((function(t){return{productId:t.productId,quantity:t.quantity}})),r=[].concat(Object(h["a"])(e),Object(h["a"])(s),Object(h["a"])(a)),i={customerId:this.selectedCustomerId?this.selectedCustomerId:0,itemsSold:r.length,sale:{promotionId:this.selectedPromotion,grandTotal:"".concat(this.netAmount),employeeId:this.selectedEmployeeId,storeId:S.storeId,initialDepositDate:(new Date).toISOString(),initialDepositType:this.selectedPaymentType,initialDepositAmount:this.showDepositInfo?"".concat(this.initialPaymentAmt):"".concat(this.netAmount)},products:r,newCustomer:Object(p["a"])({firstName:this.firstName,lastName:this.lastName,phoneNumber:this.phoneNum,email:this.email},this.prescription)};console.log(i),f.a.post("".concat(Y,"/newSale"),i).then((function(e){console.log(e),alert("Sale created"),t.resetData()}))["catch"]((function(t){return console.log(t.response)}))}},validateBarcode:function(t){t&&(16!=t.productId.length?t.barcodeError="Length of barcode should be 16 characters":f.a.get("".concat(Y,"/getInStoreProductQuantity?storeId=").concat(S.storeId,"&productId=").concat(t.productId)).then((function(e){var s=e.data,a=s.productPrice,r=s.quantity,i=s.productName;t.price=a,t.availableAmt=r,t.name=i,t.barcodeError=null,t.quantityError=null}))["catch"]((function(e){console.error(e),t.barcodeError="No such barcode exists",t.quantityError="",t.price=0,t.availableAmt=1,t.quantity=1,t.name=""})))},validateBarcodeInput:function(t,e){if("frame"===e){var s=this.productIds.frames[t];this.validateBarcode(s)}else{var a=this.productIds.lenses[t];this.validateBarcode(a)}},validateInputQuantity:function(t,e){var s=null;s="frame"===e?this.productIds.frames[t]:"lens"===e?this.productIds.lenses[t]:this.productIds.customLenses[t],this.validateQuantity(s)},validateQuantity:function(t){if(t){if(!t.productId)return void(t.barcodeError="Please enter a barcode");t.quantity>t.availableAmt?t.quantityError="Quantity requested is more than what is available in store":(t.barcodeError=null,t.quantityError=null)}},addBarcodeInput:function(t){"frame"===t?this.productIds.frames.push({productId:"",quantity:1,barcodeError:"",quantityError:"",price:0,availableAmt:1,name:""}):this.productIds.lenses.push({productId:"",quantity:1,barcodeError:"",quantityError:"",price:0,availableAmt:1,name:""})},addCustomLensInput:function(){this.productIds.customLenses.push({productId:"",quantity:1,availableAmt:1,error:"Please select lens",price:0,name:""})},removeFrameInput:function(t){this.productIds.frames.splice(t,1)},removeCustomLensInput:function(t){this.productIds.customLenses.splice(t,1)},removeStockLensInput:function(t){this.productIds.lenses.splice(t,1)},searchCustomerByName:function(){var t=this;this.firstName&&this.lastName?(this.loading=!0,this.createNewCustomer=!1,f.a.get("".concat(Y,"/getCustomerByName?firstName=").concat(this.firstName,"&lastName=").concat(this.lastName)).then((function(e){t.customerList=Object(h["a"])(e.data),t.loading=!1}))["catch"]((function(t){console.log(t)}))):alert("Please fill in a customer first name and last name")},searchCustomerByPhone:function(){var t=this;this.validPhoneNum?(this.loading=!0,this.createNewCustomer=!1,f.a.get("".concat(Y,"/getCustomerByPhoneNumber?phoneNumber=").concat(this.phoneNum)).then((function(e){t.customerList=Object(h["a"])(e.data),t.loading=!1}))["catch"]((function(t){return console.log(t)}))):alert("Please enter a valid phone number")},setCustomerInfo:function(t){var e=P.a.find(this.customerList,(function(e){return e.customerId==t}));this.phoneNum=e.phoneNumber,this.email=e.email,this.$refs.prescriptionElem.leftEyeSphere=e.leftEyeSphere,this.$refs.prescriptionElem.leftEyeCylinder=e.leftEyeCylinder,this.$refs.prescriptionElem.leftEyeAxis=e.leftEyeAxis,this.$refs.prescriptionElem.leftEyeAdd=e.leftEyeAdd,this.$refs.prescriptionElem.leftEyePrism=e.leftEyePrism,this.$refs.prescriptionElem.rightEyeSphere=e.rightEyeSphere,this.$refs.prescriptionElem.rightEyeCylinder=e.rightEyeCylinder,this.$refs.prescriptionElem.rightEyeAxis=e.rightEyeAxis,this.$refs.prescriptionElem.rightEyeAdd=e.rightEyeAdd,this.$refs.prescriptionElem.rightEyePrism=e.rightEyePrism,this.$refs.prescriptionElem.pupilDistance=e.pupilDistance,this.selectedCustomerId=e.customerId},resetCustomerInfo:function(){this.selectedCustomerId&&(this.selectedCustomerId,this.phoneNum="",this.email="",this.$refs.prescriptionElem.leftEyeSphere=0,this.$refs.prescriptionElem.leftEyeCylinder=0,this.$refs.prescriptionElem.leftEyeAxis=0,this.$refs.prescriptionElem.leftEyeAdd=0,this.$refs.prescriptionElem.leftEyePrism=0,this.$refs.prescriptionElem.rightEyeSphere=0,this.$refs.prescriptionElem.rightEyeCylinder=0,this.$refs.prescriptionElem.rightEyeAxis=0,this.$refs.prescriptionElem.rightEyeAdd=0,this.$refs.prescriptionElem.rightEyePrism=0,this.$refs.prescriptionElem.pupilDistance=0)},setLensDetails:function(t){var e=this.productIds.customLenses[t];if(e){var s=e.productId,a=P.a.find(this.customLenses,(function(t){return t.productId===s})),r=a.productPrice,i=a.productName;e.price=r,e.name=i,e.error=null}}}},et=tt,st=(s("d39b"),Object(n["a"])(et,d,m,!1,null,"bb405062",null)),at=st.exports,rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("Employee page")])},it=[],nt={name:"Employees"},ot=nt,lt=Object(n["a"])(ot,rt,it,!1,null,null,null),ct=lt.exports,ut=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container mt-3 text-center"},[s("h1",[t._v("Select Store")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.storeId,expression:"storeId"}],staticClass:"custom-select custom-select-lg mb-3",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.storeId=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("Select store")]),t._l(t.stores,(function(e){return s("option",{key:e.id,domProps:{value:e.storeId}},[t._v(" "+t._s(e.name)+" ")])}))],2),t.storeId?s("button",{staticClass:"btn btn-success btn-lg",on:{click:t.selectStore}},[t._v(" Select store ")]):t._e()])},dt=[],mt="https://owl-backend-server.herokuapp.com/hoStoresEndpoint/getAllStores",pt={name:"Home",data:function(){return{stores:[],storeId:""}},components:{},created:function(){var t=this;f.a.get("".concat(mt)).then((function(e){t.stores=Object(h["a"])(e.data)}))["catch"]((function(t){return console.log(t)}))},methods:{selectStore:function(){S.storeId=this.storeId,this.$router.push("PendingSales")}}},ht=pt,vt=Object(n["a"])(ht,ut,dt,!1,null,null,null),ft=vt.exports,bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container mt-3"},[t.alertMsg?s("div",{staticClass:"alert alert-success alert-dismissible fade show",attrs:{role:"alert"}},[t._v(" "+t._s(t.alertMsg)+" "),t._m(0)]):t._e(),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("h3",[t._v("Pending Sales")]),s("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:t.updatePendingSalesList}},[t._v(" Refresh Pending Sales ")]),s("hr"),s("div",{staticStyle:{height:"700px","overflow-y":"auto"}},t._l(t.pendingSaleList,(function(e){return s("Sale",{key:e.id,attrs:{"transaction-date":e.initialDepositDate,"sale-id":e.saleId,customer:e.customer,paid:e.fullyPaid},on:{selectSale:t.selectSale}})})),1)]),s("div",{staticClass:"col mt-5"},[s("SaleDetails",{attrs:{sale:t.selectedSale},on:{resetSelectedSale:t.resetSelectedSale,updateSale:t.updateSale}})],1)])])},yt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card mb-3"},[s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[t._v(" "+t._s(t.customer.firstName)+" "+t._s(t.customer.lastName)+" "),s("span",{staticClass:"small text-muted",staticStyle:{"font-size":"65% !important"}},[t._v(" "+t._s(new Date(t.transactionDate).toDateString())+" ")])]),s("p",{staticClass:"card-text"},[t._v("Phone Number: "+t._s(t.customer.phoneNumber))]),s("p",{staticClass:"card-text"},[t._v("Sudah Bayar: "),s("i",{class:t.iconClass})]),s("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button"},on:{click:function(e){return t.$emit("selectSale",t.saleId)}}},[t._v(" Select sale ")])])])},gt=[],_t={name:"PendingSale",props:["transactionDate","customer","paid","saleId"],computed:{iconClass:function(){return this.paid?"bi bi-check-circle-fill text-success":"bi bi-x-circle-fill text-danger"}}},It=_t,wt=Object(n["a"])(It,Ct,gt,!1,null,null,null),Pt=wt.exports,St=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.loadTemplate?s("div",[s("transition",{attrs:{name:"fade"}},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header d-flex justify-content-between align-items-center"},[s("div",{staticClass:"div align-self-center"},[s("h4",[t._v(" Sale Details ")])]),s("div",{staticClass:"div "},[s("button",{staticClass:"btn",staticStyle:{"padding-top":"0px !important"},on:{click:function(e){return t.$emit("resetSelectedSale")}}},[s("i",{staticClass:"bi bi-x",staticStyle:{"font-size":"1.5rem"}})])])]),s("div",{staticClass:"card-body"},[s("ul",{staticClass:"list-group mb-2"},[s("li",{staticClass:"list-group-item ",class:t.listTitleClassName},[t._v(" "+t._s(t.sale.customer.firstName)+" "+t._s(t.sale.customer.lastName)+"- "),s("strong",[t._v(" "+t._s(t.sale.fullyPaid?"Sudah":"Belum")+" Bayar ")])]),s("li",{staticClass:"list-group-item"},[t._v("Sale id: "+t._s(t.sale.saleId))]),s("li",{staticClass:"list-group-item"},[t._v(" Initial Deposit Date: "),s("strong",[t._v(" "+t._s(new Date(t.sale.initialDepositDate).toDateString())+" ")])]),s("li",{staticClass:"list-group-item"},[t._v(" Initial Deposit Type: "),s("strong",[t._v(" "+t._s(t.sale.initialDepositType)+" ")])]),s("li",{staticClass:"list-group-item"},[t._v(" Initial Deposit Amount: "),s("strong",[t._v(" Rp "+t._s(t.sale.initialDepositAmount)+" ")])]),t.sale.fullyPaid?t._e():s("li",{staticClass:"list-group-item"},[t._v(" Amount Due: "),s("strong",[t._v(" Rp "+t._s(t.amountDue)+" ")])]),s("li",{staticClass:"list-group-item"},[t._v(" Grand Total: "),s("strong",[t._v(" Rp "+t._s(t.sale.grandTotal)+" ")])])]),s("table",{staticClass:"table table-striped table-hover"},[s("thead",{staticClass:"thead-dark"},[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Product")]),s("th",{attrs:{scope:"col"}},[t._v("Quantity")])])]),s("tbody",t._l(t.sale.saleDetailList,(function(e){return s("tr",{key:e.id},[s("td",[t._v(t._s(e.product.productId))]),s("td",[t._v(t._s(e.quantity))])])})),0)]),t.canRefund?s("div",[s("button",{staticClass:"btn btn-danger btn-block",attrs:{"data-toggle":"modal","data-target":"#completionModal"}},[t._v(" Refund Sale ")])]):s("div",[t.sale.fullyPaid?s("button",{staticClass:"btn btn-success btn-block",on:{click:function(e){return t.$emit("updateSale",t.selectedInStorePaymentType,t.amountDue)}}},[t._v(" Pick-up ")]):s("button",{staticClass:"btn btn-primary btn-block",attrs:{"data-toggle":"modal","data-target":"#completionModal"}},[t._v(" Pay now ")])])])])]),s("div",{staticClass:"modal fade",attrs:{id:"completionModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v(t._s(t.modalTitle))]),t._m(0)]),s("div",{staticClass:"modal-body"},[t.canRefund?s("div",[s("strong",[t._v(" Are you sure you want to issue this refund? ")])]):s("div",[s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col"},[s("label",{staticClass:"form-label",attrs:{for:"paymentAmount"}},[t._v(" Payment Amount ")]),s("input",{staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:t.amountDue}})])]),s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col"},[s("label",{staticClass:"form-label",attrs:{for:"paymentType"}},[t._v(" Payment Type ")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedInStorePaymentType,expression:"selectedInStorePaymentType"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedInStorePaymentType=e.target.multiple?s:s[0]}}},[s("option",{attrs:{disabled:"",selected:"",value:""}},[t._v("Select Payment Type")]),t._l(t.inStorePaymentType,(function(e){return s("option",{key:e.id},[t._v(" "+t._s(e)+" ")])}))],2)])])])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" Cancel ")]),s("button",{staticClass:"btn btn-success",attrs:{disabled:t.disablePaymentBtn,type:"button","data-dismiss":"modal"},on:{click:t.confirmAction}},[t._v(" Confirm ")])])])])])],1):t._e()},Et=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],xt={name:"SaleDetail",props:["sale","canRefund"],data:function(){return{inStorePaymentType:["Cash","Debit","Credit"],selectedInStorePaymentType:""}},computed:{loadTemplate:function(){return null!=this.sale},listTitleClassName:function(){return this.sale.fullyPaid?"list-group-item-success":"list-group-item-danger"},disablePaymentBtn:function(){return""===this.selectedInStorePaymentType&&!this.canRefund},amountDue:function(){return(this.sale.grandTotal-this.sale.initialDepositAmount).toFixed(2)},modalTitle:function(){return this.canRefund?"Refund Sale":"Payment"}},methods:{confirmAction:function(){this.canRefund?this.$emit("updateSale"):this.$emit("updateSale",this.selectedInStorePaymentType,this.amountDue)}}},kt=xt,Nt=(s("9f8a"),Object(n["a"])(kt,St,Et,!1,null,"2e2893ac",null)),At=Nt.exports,$t="https://owl-backend-server.herokuapp.com/posEndpoint",Dt={name:"Home",data:function(){return{selectedSale:null,pendingSaleList:[],alertMsg:""}},components:{Sale:Pt,SaleDetails:At},created:function(){this.updatePendingSalesList()},methods:{updatePendingSalesList:function(){var t=this;f.a.get("".concat($t,"/getPendingSaleList?storeId=").concat(S.storeId)).then((function(e){t.pendingSaleList=Object(h["a"])(e.data)}))["catch"]((function(t){return console.log(t)}))},selectSale:function(t){this.selectedSale=P.a.find(this.pendingSaleList,(function(e){return e.saleId===t}))},resetSelectedSale:function(){this.selectedSale=null},updateSale:function(t,e){var s=this,a=(new Date).toISOString(),r={saleId:this.selectedSale.saleId,pickUpDate:a};this.selectedSale.fullyPaid||(r.finalPaymentDate=a,r.finalPaymentType=t,r.finalPaymentAmount=parseFloat(e)),f.a.post("".concat($t,"/updateSale?storeId=").concat(S.storeId),r).then((function(t){s.updatePendingSalesList(),s.selectedSale=null,s.alertMsg=t.data}))["catch"]((function(t){return console.log(t)}))}}},Vt=Dt,Lt=Object(n["a"])(Vt,bt,yt,!1,null,null,null),qt=Lt.exports,Tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid mt-2"},[s("h1",[t._v("Restock shipment")]),s("hr"),s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col"},[s("label",{attrs:{for:"barcode"}},[t._v("Scan barcode")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.barcode,expression:"barcode",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number",min:"1",id:"barcode"},domProps:{value:t.barcode},on:{input:function(e){e.target.composing||(t.barcode=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),s("div",{staticClass:"row "},[s("div",{staticClass:"col d-flex justify-content-center"},[s("button",{staticClass:"btn btn-primary",attrs:{disabled:t.disableBtn},on:{click:t.confirm}},[t._v(" Click to confirm shipment is received ")])])])])},jt=[],Ot="https://owl-backend-server.herokuapp.com/posEndpoint/receiveShipment",Rt={name:"Shipments",data:function(){return{barcode:null}},computed:{disableBtn:function(){return!this.barcode}},methods:{confirm:function(){var t=this;f.a.post(Ot,{storeId:S.storeId,shipmentId:this.barcode,receivedDate:(new Date).toISOString()}).then((function(e){alert(e.data),t.barcode=null}))["catch"]((function(t){alert("Server error: ".concat(t.response.data.message," . Please try again later"))}))}}},Bt=Rt,Mt=Object(n["a"])(Bt,Tt,jt,!1,null,null,null),Ft=Mt.exports,Qt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container mt-3"},[t.alertMsg?s("div",{staticClass:"alert alert-success alert-dismissible fade show",attrs:{role:"alert"}},[t._v(" "+t._s(t.alertMsg)+" "),t._m(0)]):t._e(),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("h3",[t._v("Refund Sales")]),s("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:t.updateRecentSalesList}},[t._v(" Refresh Sales ")]),s("hr"),s("div",{staticStyle:{height:"700px","overflow-y":"auto"}},t._l(t.recetSalesList,(function(e){return s("Sale",{key:e.id,attrs:{"transaction-date":e.initialDepositDate,"sale-id":e.saleId,customer:e.customer,paid:e.fullyPaid},on:{selectSale:t.selectSale}})})),1)]),s("div",{staticClass:"col mt-5"},[s("SaleDetails",{attrs:{sale:t.selectedSale,canRefund:!0},on:{resetSelectedSale:t.resetSelectedSale,updateSale:t.updateSale}})],1)])])},zt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Ut="https://owl-backend-server.herokuapp.com/posEndpoint",Ht={name:"Home",data:function(){return{selectedSale:null,recetSalesList:[],alertMsg:""}},components:{Sale:Pt,SaleDetails:At},created:function(){this.updateRecentSalesList()},methods:{updateRecentSalesList:function(){var t=this;f.a.get("".concat(Ut,"/getRecentSalesList?storeId=").concat(S.storeId)).then((function(e){t.recetSalesList=Object(h["a"])(e.data)}))["catch"]((function(t){return console.log(t)}))},selectSale:function(t){this.selectedSale=P.a.find(this.recetSalesList,(function(e){return e.saleId===t}))},resetSelectedSale:function(){this.selectedSale=null},updateSale:function(){var t=this;f.a.get("".concat(Ut,"/refundSale?saleId=").concat(this.selectedSale.saleId)).then((function(e){t.updateRecentSalesList(),t.selectedSale=null,t.alertMsg=e.data}))["catch"]((function(t){return console.log(t)}))}}},Gt=Ht,Jt=Object(n["a"])(Gt,Qt,zt,!1,null,null,null),Kt=Jt.exports;a["a"].use(u["a"]);var Wt=[{path:"/",name:"home",component:ft},{path:"/pendingSales",name:"PendingSales",component:qt},{path:"/salesForm",name:"SalesForm",component:at},{path:"/employees",name:"Employees",component:ct},{path:"/shipments",name:"Shipments",component:Ft},{path:"/refunds",name:"Refunds",component:Kt}],Xt=new u["a"]({routes:Wt,mode:"history"});Xt.beforeEach((function(t,e,s){"/"!==t.path?S.storeId?s():s({name:"home"}):S.storeId?s({name:"PendingSales"}):s()}));var Yt=Xt;s("4989"),s("ab8b");a["a"].config.productionTip=!1,new a["a"]({router:Yt,render:function(t){return t(c)}}).$mount("#app")},"870b":function(t,e,s){},9120:function(t,e,s){},"9f8a":function(t,e,s){"use strict";s("cb55")},c2ff:function(t,e,s){"use strict";s("0855")},cb55:function(t,e,s){},cc06:function(t,e,s){"use strict";s("870b")},d39b:function(t,e,s){"use strict";s("9120")}});
//# sourceMappingURL=app.f3f24ead.js.map