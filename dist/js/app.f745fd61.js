(function(t){function e(e){for(var s,o,n=e[0],l=e[1],c=e[2],d=0,m=[];d<n.length;d++)o=n[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&m.push(i[o][0]),i[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(m.length)m.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],s=!0,n=1;n<r.length;n++){var l=r[n];0!==i[l]&&(s=!1)}s&&(a.splice(e--,1),t=o(o.s=r[0]))}return t}var s={},i={app:0},a=[];function o(e){if(s[e])return s[e].exports;var r=s[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=s,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(r,s,function(e){return t[e]}.bind(null,s));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var u=l;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"1cd5":function(t,e,r){"use strict";r("dd48")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var s=r("2b0e"),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light"},[r("div",{staticClass:"container-fluid"},[r("span",{staticClass:"navbar-brand mb-0 h1"},[t._v("Owl")]),r("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[r("ul",{staticClass:"navbar-nav me-auto mb-2 mb-lg-0"},[r("li",{staticClass:"nav-item"},[r("router-link",{attrs:{to:"/","active-class":"nav-link"}},[t._v("Sales")])],1),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",attrs:{to:"/Employees","active-class":"nav-link"}},[t._v("Employees")])],1)])])])]),r("router-view")],1)},a=[],o=r("2877"),n={},l=Object(o["a"])(n,i,a,!1,null,null,null),c=l.exports,u=r("8c4f"),d=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container-fluid mt-2"},[r("h1",[t._v("Create Sale")]),r("form",{staticClass:"mt-3"},[r("h3",[t._v("Customer information")]),r("hr"),r("customer-list",{directives:[{name:"show",rawName:"v-show",value:!t.createNewCustomer,expression:"!createNewCustomer"}],attrs:{list:t.customerList},on:{selectCustomer:t.setCustomerInfo}}),r("div",{staticClass:"row mb-3"},[r("div",{staticClass:"col-6"},[r("div",{staticClass:"mb-3 row"},[r("div",{staticClass:"col"},[r("label",{staticClass:"form-label",attrs:{for:"CustomerName"}},[t._v(" Customer First Name ")]),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.firstName,expression:"firstName",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"firstName",required:""},domProps:{value:t.firstName},on:{input:function(e){e.target.composing||(t.firstName=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),r("div",{staticClass:"mb-3 row"},[r("div",{staticClass:"col"},[r("label",{staticClass:"form-label",attrs:{for:"CustomerName"}},[t._v(" Customer Last Name ")]),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.lastName,expression:"lastName",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"lastName",required:""},domProps:{value:t.lastName},on:{input:function(e){e.target.composing||(t.lastName=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),r("div",{staticClass:"mb-3 row "},[r("div",{staticClass:"col"},[r("button",{staticClass:"btn btn-info mr-5",attrs:{type:"button"},on:{click:t.checkCustomer}},[t._v(" Check Customer ")]),r("div",{staticClass:"form-check d-inline-block"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.createNewCustomer,expression:"createNewCustomer"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"createNewCustomer",id:"createNewCustomer"},domProps:{checked:Array.isArray(t.createNewCustomer)?t._i(t.createNewCustomer,null)>-1:t.createNewCustomer},on:{change:function(e){var r=t.createNewCustomer,s=e.target,i=!!s.checked;if(Array.isArray(r)){var a=null,o=t._i(r,a);s.checked?o<0&&(t.createNewCustomer=r.concat([a])):o>-1&&(t.createNewCustomer=r.slice(0,o).concat(r.slice(o+1)))}else t.createNewCustomer=i}}}),r("label",{staticClass:"form-check-label",attrs:{for:"createNewCustomer"}},[t._v(" Create New Customer ")])])])]),r("div",{class:{"d-none":t.hideCustomerInfo}},[r("div",{staticClass:"mb-3 row"},[r("div",{staticClass:"col"},[r("label",{staticClass:"form-label",attrs:{for:"CustomerPhone"}},[t._v(" Customer Phone ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneNum,expression:"phoneNum"}],staticClass:"form-control",attrs:{type:"text",name:"phoneNumber",required:""},domProps:{value:t.phoneNum},on:{input:function(e){e.target.composing||(t.phoneNum=e.target.value)}}})])]),r("div",{staticClass:"mb-3 row"},[r("div",{staticClass:"col"},[r("label",{staticClass:"form-label",attrs:{for:"CustomerEmail"}},[t._v(" Customer Email ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",name:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])])])])]),r("div",{staticClass:"row",class:{"d-none":t.hideCustomerInfo}},[r("div",{staticClass:"col"},[t._m(0),r("h6",[t._v("Right eye")]),r("div",{staticClass:"row mb-3 "},[r("div",{staticClass:"col"},[r("label",{staticClass:"form-label",attrs:{for:"RightEyeSphere"}},[t._v(" Right Eye Sphere ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.prescription.rightEyeSphere,expression:"prescription.rightEyeSphere"}],staticClass:"form-control",attrs:{type:"text",name:"rightEyeSphere",required:""},domProps:{value:t.prescription.rightEyeSphere},on:{input:function(e){e.target.composing||t.$set(t.prescription,"rightEyeSphere",e.target.value)}}})]),r("div",{staticClass:"col"},[r("label",{staticClass:"form-label",attrs:{for:"RightEyeCylinder"}},[t._v(" Right Eye Cylinder ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.prescription.rightEyeCylinder,expression:"prescription.rightEyeCylinder"}],staticClass:"form-control",attrs:{type:"text",name:"rightEyeCylinder",required:""},domProps:{value:t.prescription.rightEyeCylinder},on:{input:function(e){e.target.composing||t.$set(t.prescription,"rightEyeCylinder",e.target.value)}}})]),r("div",{staticClass:"col"},[r("label",{staticClass:"form-label",attrs:{for:"RightEyeAxis"}},[t._v(" Right Eye Axis ")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.prescription.rightEyeAxis,expression:"prescription.rightEyeAxis",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"text",name:"rightEyeAxis",required:""},domProps:{value:t.prescription.rightEyeAxis},on:{input:function(e){e.target.composing||t.$set(t.prescription,"rightEyeAxis",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),r("div",{staticClass:"col"},[r("label",{staticClass:"form-label",attrs:{for:"RightEyeAdd"}},[t._v(" Right Eye Add ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.prescription.rightEyeAdd,expression:"prescription.rightEyeAdd"}],staticClass:"form-control",attrs:{type:"text",name:"rightEyeAdd",required:""},domProps:{value:t.prescription.rightEyeAdd},on:{input:function(e){e.target.composing||t.$set(t.prescription,"rightEyeAdd",e.target.value)}}})]),r("div",{staticClass:"col"},[r("label",{staticClass:"form-label",attrs:{for:"RightEyePrism"}},[t._v(" Right Eye Prism ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.prescription.rightEyePrism,expression:"prescription.rightEyePrism"}],staticClass:"form-control",attrs:{type:"text",name:"rightEyePrism",required:""},domProps:{value:t.prescription.rightEyePrism},on:{input:function(e){e.target.composing||t.$set(t.prescription,"rightEyePrism",e.target.value)}}})]),r("div",{staticClass:"col"},[r("label",{attrs:{for:"pupilaryDistance"}},[t._v("PD")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.prescription.pd,expression:"prescription.pd",modifiers:{number:!0}}],staticClass:"form-control",attrs:{id:"pupilaryDistance",type:"number",name:"pd",required:""},domProps:{value:t.prescription.pd},on:{input:function(e){e.target.composing||t.$set(t.prescription,"pd",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),r("h6",[t._v("Left eye")]),r("div",{staticClass:"row mb-3"},[r("div",{staticClass:"col"},[r("label",{staticClass:"form-label",attrs:{for:"LeftEyeSphere"}},[t._v(" Left Eye Sphere ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.prescription.leftEyeSphere,expression:"prescription.leftEyeSphere"}],staticClass:"form-control",attrs:{type:"text",name:"leftEyeSphere",required:""},domProps:{value:t.prescription.leftEyeSphere},on:{input:function(e){e.target.composing||t.$set(t.prescription,"leftEyeSphere",e.target.value)}}})]),r("div",{staticClass:"col"},[r("label",{staticClass:"form-label",attrs:{for:"LeftEyeCylinder"}},[t._v(" Left Eye Cylinder ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.prescription.leftEyeCylinder,expression:"prescription.leftEyeCylinder"}],staticClass:"form-control",attrs:{type:"text",name:"leftEyeCylinder",required:""},domProps:{value:t.prescription.leftEyeCylinder},on:{input:function(e){e.target.composing||t.$set(t.prescription,"leftEyeCylinder",e.target.value)}}})]),r("div",{staticClass:"col"},[r("label",{staticClass:"form-label",attrs:{for:"LeftEyeAxis"}},[t._v(" Left Eye Axis ")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.prescription.leftEyeAxis,expression:"prescription.leftEyeAxis",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"text",name:"leftEyeAxis",required:""},domProps:{value:t.prescription.leftEyeAxis},on:{input:function(e){e.target.composing||t.$set(t.prescription,"leftEyeAxis",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),r("div",{staticClass:"col"},[r("label",{staticClass:"form-label",attrs:{for:"LeftEyeAdd"}},[t._v(" Left Eye Add ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.prescription.leftEyeAdd,expression:"prescription.leftEyeAdd"}],staticClass:"form-control",attrs:{type:"text",name:"leftEyeAdd",required:""},domProps:{value:t.prescription.leftEyeAdd},on:{input:function(e){e.target.composing||t.$set(t.prescription,"leftEyeAdd",e.target.value)}}})]),r("div",{staticClass:"col"},[r("label",{staticClass:"form-label",attrs:{for:"LeftEyePrism"}},[t._v(" Left Eye Prism ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.prescription.leftEyePrism,expression:"prescription.leftEyePrism"}],staticClass:"form-control",attrs:{type:"text",name:"leftEyePrism",required:""},domProps:{value:t.prescription.leftEyePrism},on:{input:function(e){e.target.composing||t.$set(t.prescription,"leftEyePrism",e.target.value)}}})]),r("div",{staticClass:"col"})])])]),r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("h3",[t._v("Product info")]),r("hr"),r("div",{staticClass:"row",class:{"d-none":t.productIds.frames.length<1}},[t._m(1)]),t._l(t.productIds.frames,(function(e,s){return r("div",{key:e.id,staticClass:"mb-3 row"},[r("div",{staticClass:"col"},[r("label",{staticClass:"form-label",attrs:{for:"ProductId"}},[t._v("Frame Barcode")]),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.productId,expression:"product.productId",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":e.barcodeError&&null!=e.barcodeError,"is-valid":null===e.barcodeError},attrs:{type:"text","aria-label":"Product","aria-describedby":"productId",required:""},domProps:{value:e.productId},on:{change:function(e){return t.validateFrameBarcode(s)},input:function(r){r.target.composing||t.$set(e,"productId",r.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),r("small",{staticClass:"form-text text-danger"},[t._v(" "+t._s(e.barcodeError)+" ")])]),r("div",{staticClass:"col"},[r("label",{staticClass:"form-label",attrs:{for:"Quantity"}},[t._v("Quantity")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.quantity,expression:"product.quantity",modifiers:{number:!0}}],staticClass:"form-control",class:{"is-invalid":e.quantityError&&null!=e.quantityError,"is-valid":null===e.quantityError},attrs:{type:"number","aria-label":"ProductQuantity","aria-describedby":"productQuantity",min:"1",max:e.availableAmt,disabled:e.barcodeError||!e.productId},domProps:{value:e.quantity},on:{change:function(e){return t.validateQuantity(s,"frame")},input:function(r){r.target.composing||t.$set(e,"quantity",t._n(r.target.value))},blur:function(e){return t.$forceUpdate()}}}),r("small",{staticClass:"form-text text-danger"},[t._v(" "+t._s(e.quantityError)+" ")])]),r("div",{staticClass:"col-2"},[r("label",{staticClass:"form-label",attrs:{for:"Remove Product"}},[t._v(" Remove Product ")]),r("button",{staticClass:"btn btn-danger form-control",attrs:{type:"button"},on:{click:function(e){return t.removeFrameInput(s)}}},[r("svg",{staticClass:"bi bi-dash-circle-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[r("path",{attrs:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1h-7z"}})])])])])})),r("div",{staticClass:"row",class:{"d-none":t.productIds.lenses.length<1}},[t._m(2)]),t._l(t.productIds.lenses,(function(e,s){return r("div",{key:e.id,staticClass:"mb-3 row"},[r("div",{staticClass:"col"},[r("label",{staticClass:"form-label",attrs:{for:"productId"}},[t._v("Lens")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.productId,expression:"product.productId"}],staticClass:"form-control",on:{change:[function(r){var s=Array.prototype.filter.call(r.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"productId",r.target.multiple?s:s[0])},function(e){return t.setLensDetails(s)}]}},[r("option",{attrs:{selected:"",disabled:"",value:""}},[t._v("Select Lens")]),t._l(t.lenses,(function(e){return r("option",{key:e.id,domProps:{value:e.productId}},[t._v(" "+t._s(e.productName)+" ")])}))],2)]),r("div",{staticClass:"col"},[r("label",{staticClass:"form-label",attrs:{for:"Quantity"}},[t._v("Quantity")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.quantity,expression:"product.quantity",modifiers:{number:!0}}],staticClass:"form-control",class:{"is-invalid":e.error&&null!=e.error,"is-valid":null===e.error},attrs:{type:"number","aria-label":"ProductQuantity","aria-describedby":"productQuantity",min:"1",max:e.availableAmt,disabled:!e.productId},domProps:{value:e.quantity},on:{change:function(e){return t.validateQuantity(s,"lens")},input:function(r){r.target.composing||t.$set(e,"quantity",t._n(r.target.value))},blur:function(e){return t.$forceUpdate()}}}),r("small",{staticClass:"form-text text-danger"},[t._v(" "+t._s(e.error)+" ")])]),r("div",{staticClass:"col-2"},[r("label",{staticClass:"form-label",attrs:{for:"Remove Product"}},[t._v(" Remove Product ")]),r("button",{staticClass:"btn btn-danger form-control",attrs:{type:"button"},on:{click:function(e){return t.removeLensInput(s)}}},[r("svg",{staticClass:"bi bi-dash-circle-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[r("path",{attrs:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1h-7z"}})])])])])})),r("div",{staticClass:"mb3 row"},[r("div",{staticClass:"col d-flex justify-content-center"},[r("button",{staticClass:"btn btn-primary mr-2",attrs:{type:"button"},on:{click:t.addFrameInput}},[t._v(" Add Frame "),r("svg",{staticClass:"bi bi-plus-circle-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[r("path",{attrs:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"}})])]),r("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.addLensInput}},[t._v(" Add Lens "),r("svg",{staticClass:"bi bi-plus-circle-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[r("path",{attrs:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"}})])])])])],2)]),r("div",{staticClass:"row mb-3"},[r("div",{staticClass:"col"},[r("h3",[t._v("Promotion")]),r("hr"),r("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedPromotion,expression:"selectedPromotion"}],staticClass:"form-control",attrs:{"aria-label":"promotion selection"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedPromotion=e.target.multiple?r:r[0]}}},[r("option",{attrs:{value:""}},[t._v("Select promo")]),t._l(t.promotions,(function(e){return r("option",{key:e.id,domProps:{value:e.promotionId}},[t._v(" "+t._s(e.name)+" ")])}))],2)])]),t.netAmount?r("div",[t._m(3),r("div",{staticClass:"row mb-3"},[r("div",{staticClass:"col"},[r("table",{staticClass:"table"},[t._m(4),r("tbody",[t._l(t.productIds.frames,(function(e){return r("tr",{key:e.id},[r("th",{attrs:{scope:"row"}},[t._v(t._s(e.productId))]),r("td",[t._v(t._s(e.name))]),r("td",[t._v(t._s(e.quantity))]),r("td",[t._v(t._s(e.quantity*e.price))])])})),t._l(t.productIds.lenses,(function(e){return r("tr",{key:e.id},[r("th",{attrs:{scope:"row"}},[t._v(t._s(e.productId))]),r("td",[t._v(t._s(e.name))]),r("td",[t._v(t._s(e.quantity))]),r("td",[t._v(t._s(e.quantity*e.price))])])}))],2)])])])]):t._e(),r("hr"),r("div",{attrs:{id:"costBreakdownDiv"}},[r("div",{staticClass:"row justify-content-end"},[t._m(5),r("div",{staticClass:"col-2 text-right"},[r("span",{staticClass:"text-success align-middle costBreakdown"},[t._v(" "+t._s(t.totalAmount)+" Rupiah ")])])]),r("div",{staticClass:"row justify-content-end"},[t._m(6),r("div",{staticClass:"col-2 text-right"},[r("span",{staticClass:"text-success align-middle costBreakdown"},[t._v(" "+t._s(t.discountName)+" ")])])]),r("div",{staticClass:"row mb-3 justify-content-end"},[t._m(7),r("div",{staticClass:"col-2 text-right"},[r("span",{staticClass:"text-success align-middle costBreakdown"},[t._v(" "+t._s(t.netAmount)+" Rupiah ")])])])]),r("div",{staticClass:"row mb-3"},[r("div",{staticClass:"col-4"},[r("h3",[t._v("Employee")]),r("hr"),r("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedEmployeeId,expression:"selectedEmployeeId"}],staticClass:"form-control",attrs:{"aria-label":"employee selection",required:""},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedEmployeeId=e.target.multiple?r:r[0]}}},[r("option",{attrs:{value:""}},[t._v("Select Employee")]),t._l(t.employees,(function(e){return r("option",{key:e.id,domProps:{value:e.employeeId}},[t._v(" "+t._s(e.firstName)+" "+t._s(e.lastName)+" ("+t._s(e.title)+") ")])}))],2)])]),r("div",{staticClass:"row mb-3"},[r("div",{staticClass:"col"},[r("div",{staticClass:"form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.showDepositInfo,expression:"showDepositInfo"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"showDepositInfo"},domProps:{checked:Array.isArray(t.showDepositInfo)?t._i(t.showDepositInfo,null)>-1:t.showDepositInfo},on:{change:function(e){var r=t.showDepositInfo,s=e.target,i=!!s.checked;if(Array.isArray(r)){var a=null,o=t._i(r,a);s.checked?o<0&&(t.showDepositInfo=r.concat([a])):o>-1&&(t.showDepositInfo=r.slice(0,o).concat(r.slice(o+1)))}else t.showDepositInfo=i}}}),r("label",{staticClass:"form-check-label",attrs:{for:"showDepositInfo"}},[t._v(" Deposit dulu? ")])])])]),r("div",{staticClass:"row mb-3",class:{"d-none":!t.showDepositInfo}},[r("div",{staticClass:"col"},[r("h3",[t._v("Deposit Info")]),r("hr"),r("div",{staticClass:"row -mb-3"},[r("div",{staticClass:"col"},[r("label",{staticClass:"form-label",attrs:{for:"Initial Payment Amount"}},[t._v(" Initial Payment Amount ")]),r("div",{staticClass:"input-group mb-3"},[r("span",{staticClass:"input-group-text",attrs:{id:"rupiah-currency"}},[t._v("Rp")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.initialPaymentAmt,expression:"initialPaymentAmt",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number","aria-label":"initialPaymentAmount","aria-describedby":"rupiah-currency",required:t.showDepositInfo},domProps:{value:t.initialPaymentAmt},on:{input:function(e){e.target.composing||(t.initialPaymentAmt=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])])]),r("div",{staticClass:"row mb-3"},[r("div",{staticClass:"col"},[r("label",{staticClass:"form-label",attrs:{for:"Initial Payment Type"}},[t._v(" Initial Payment Type ")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedPaymentType,expression:"selectedPaymentType"}],staticClass:"form-control",attrs:{required:t.showDepositInfo},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedPaymentType=e.target.multiple?r:r[0]}}},t._l(t.initialPaymentType,(function(e){return r("option",{key:e.id},[t._v(" "+t._s(e)+" ")])})),0)])]),r("div",{staticClass:"row mb-3"},[r("div",{staticClass:"col"},[r("label",{staticClass:"form-label",attrs:{for:"PickupDate"}},[t._v("Pickup Date")]),r("datetime",{attrs:{"input-class":"form-control",type:"datetime",required:t.showDepositInfo},model:{value:t.pickupDate,callback:function(e){t.pickupDate=e},expression:"pickupDate"}})],1)])])]),r("div",{staticClass:"row mb-3"},[r("div",{staticClass:"col-10"}),r("div",{staticClass:"col"},[r("button",{staticClass:"btn btn-warning mr-2",attrs:{type:"reset"},on:{click:t.resetData}},[t._v(" Cancel Sale ")]),r("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.formHasErrors},on:{click:function(e){return t.createSale(e)}}},[t._v(" Create Sale ")])])])],1)])},m=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mt-3 row"},[r("div",{staticClass:"col"},[r("h5",[t._v("Prescription")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col"},[r("h4",[t._v("Frames")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col"},[r("h4",[t._v("Lenses")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row mb-3"},[r("div",{staticClass:"col"},[r("h5",[t._v("Sale Details")]),r("hr")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"thead-dark"},[r("tr",[r("th",{attrs:{scope:"col"}},[t._v("Item Code")]),r("th",{attrs:{scope:"col"}},[t._v("Item Name")]),r("th",{attrs:{scope:"col"}},[t._v("Qty")]),r("th",{attrs:{scope:"col"}},[t._v("Price(Rupiah)")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-2 text-right"},[r("h4",[t._v(" Total Amount: ")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-2 text-right"},[r("h4",[t._v(" Discount: ")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-2 text-right"},[r("h4",[t._v(" Net Amount: ")])])}],p=(r("99af"),r("7db0"),r("d81d"),r("45fc"),r("a434"),r("accc"),r("0d03"),r("b0c0"),r("2909")),v=r("bc3a"),f=r.n(v),h=r("859b"),y=(r("c0da"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row flex-row flex-nowrap overflow-auto mb-3"},t._l(t.list,(function(e){return r("div",{key:e.id,staticClass:"col"},[r("div",{staticClass:"card card-block"},[r("div",{staticClass:"card-body"},[r("h5",{staticClass:"card-title"},[t._v(" "+t._s(e.firstName)+" "+t._s(e.lastName)+" ")]),r("p",{staticClass:"card-text"},[t._v("Email: "+t._s(e.email))]),r("p",{staticClass:"card-text"},[t._v("Phone # : "+t._s(e.phoneNumber))]),r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(r){return t.selectCustomer(e.customerId)}}},[t._v(" Select Customer ")])])])])})),0)}),C=[],b={name:"CustomerList",props:{list:Array},methods:{selectCustomer:function(t){this.$emit("selectCustomer",t)}}},g=b,E=(r("1cd5"),Object(o["a"])(g,y,C,!1,null,"5cd20786",null)),_=E.exports,w=r("2ef0"),I=r.n(w),x=function(){return{productIds:{frames:[],lenses:[]},lenses:[],employees:[],selectedEmployeeId:"",firstName:"",lastName:"",phoneNum:"",email:"",prescription:{leftEyeSphere:null,leftEyeCylinder:null,leftEyeAxis:null,leftEyeAdd:null,leftEyePrism:null,rightEyeSphere:null,rightEyeCylinder:null,rightEyeAxis:null,rightEyeAdd:null,rightEyePrism:null,pd:null},promotions:[],selectedPromotion:"",showDepositInfo:!1,initialPaymentAmt:0,initialPaymentType:["Cash","Debit","Credit"],selectedPaymentType:"",pickupDate:(new Date).toISOString(),createNewCustomer:!1,customerList:[],selectedCustomerId:null}},P={name:"Home",components:{datetime:h["Datetime"],CustomerList:_},data:x,created:function(){this.fetchDataFromServer()},computed:{hideCustomerInfo:function(){return this.customerList.length<1&&!this.createNewCustomer},discountName:function(){var t=this,e=this.promotions.find((function(e){return e.promotionId==t.selectedPromotion}));return e?e.name:"0%"},totalAmount:function(){var t=0,e=0,r=0;return(this.productIds.frames.length>0||this.productIds.lenses.length>0)&&(t=I.a.sumBy(this.productIds.frames,(function(t){return t.price*t.quantity})),r+=t,e=I.a.sumBy(this.productIds.lenses,(function(t){return t.price*t.quantity})),r+=e),r},netAmount:function(){var t=this,e=this.totalAmount,r=this.promotions.find((function(e){return e.promotionId==t.selectedPromotion}));if(r){var s=e*(r.discountVal/100);e-=s}return e},formHasErrors:function(){var t=I.a.some(this.productIds.frames,(function(t){return t.barcodeError||t.quantityError})),e=I.a.some(this.productIds.lenses,(function(t){return t.error}));return t||e}},methods:{fetchDataFromServer:function(){var t=this;f.a.get("http://192.168.1.106:8080/server-0.0/restEndpoint/getAllStoreLenses").then((function(e){return t.lenses=Object(p["a"])(e.data.returned)}))["catch"]((function(t){return console.error(t)})),f.a.get("http://192.168.1.106:8080/server-0.0/restEndpoint/getStorePromotions?storeId=1").then((function(e){var r=e.data.returned;t.promotions=r.map((function(t){return{name:t.promotionName,discountVal:t.percentage,promotionId:t.promotionId}}))}))["catch"]((function(t){return console.error(t)})),f.a.get("http://192.168.1.106:8080/server-0.0/restEndpoint/getStoreEmployees?storeId=1").then((function(e){t.employees=Object(p["a"])(e.data.returned)}))["catch"]((function(t){return console.error(t)}))},resetData:function(){Object.assign(this.$data,x()),this.fetchDataFromServer()},createSale:function(t){var e=this;t.preventDefault();var r=this.productIds.frames.map((function(t){return{productId:t.productId,quantity:t.quantity}})),s=this.productIds.lenses.map((function(t){return{productId:t.productId,quantity:t.quantity}})),i=[].concat(Object(p["a"])(r),Object(p["a"])(s)),a={newSale:{promotionId:this.selectedPromotion,grandTotal:"".concat(this.netAmount),salespersonId:this.selectedEmployeeId,storeId:1,initialPaymentDate:(new Date).toISOString().substring(0,19),initialPaymentType:this.selectedPaymentType,initialPaymentAmount:"".concat(this.initialPaymentAmt),customerId:this.selectedCustomerId?this.selectedCustomerId:0,delivered:!1,customer:{firstName:this.firstName,lastName:this.lastName,phoneNumber:this.phoneNum,email:this.email,pupilDistance:this.prescription.pd,leftEyeSphere:this.prescription.leftEyeSphere,leftEyeCylinder:this.prescription.leftEyeCylinder,leftEyeAxis:this.prescription.leftEyeAxis,leftEyeAdd:this.prescription.leftEyeAdd,leftEyePrism:this.prescription.leftEyePrism,rightEyeSphere:this.prescription.rightEyeSphere,rightEyeCylinder:this.prescription.rightEyeCylinder,rightEyeAxis:this.prescription.rightEyeAxis,rightEyeAdd:this.prescription.rightEyeAdd,rightEyePrism:this.prescription.rightEyePrism},products:i}};f.a.post("http://192.168.1.106:8080/server-0.0/restEndpoint/newSale",a).then((function(t){console.log(t),alert("Sale created"),e.resetData()}))["catch"]((function(t){return console.log(t.response)}))},validateFrameBarcode:function(t){var e=this.productIds.frames[t];e&&(16!=e.productId.length?e.barcodeError="Length of barcode should be 16 characters":f.a.get("http://192.168.1.106:8080/server-0.0/restEndpoint/getStoreProducts?storeId=1&productId=".concat(e.productId)).then((function(t){if(1==t.data.returned.length){var r=t.data.returned[0],s=r.price,i=r.quantity,a=r.name;e.price=s,e.availableAmt=i,e.name=a,e.barcodeError=null,e.quantityError=null}}))["catch"]((function(t){console.error(t),e.barcodeError="No such barcode exists",e.quantityError="",e.price=0,e.availableAmt=1,e.quantity=1,e.name=""})))},validateQuantity:function(t,e){if("frame"===e){var r=this.productIds.frames[t];if(r){if(!r.productId)return void(r.barcodeError="Please enter a barcode");r.quantity>r.availableAmt?r.quantityError="Quantity requested is more than what is available in store":(r.barcodeError=null,r.quantityError=null)}}else{var s=this.productIds.lenses[t];s&&(s.quantity>s.availableAmt?s.error="Quantity requested is more than what is available in store":s.error=null)}},addFrameInput:function(){this.productIds.frames.push({productId:"",quantity:1,barcodeError:"",quantityError:"",price:0,availableAmt:1,name:""})},addLensInput:function(){this.productIds.lenses.push({productId:"",quantity:1,availableAmt:1,error:"Please select lens",price:0,name:""})},removeFrameInput:function(t){this.productIds.frames.splice(t,1)},removeLensInput:function(t){this.productIds.lenses.splice(t,1)},checkCustomer:function(){var t=this;this.firstName&&this.lastName?f.a.get("http://192.168.1.106:8080/server-0.0/restEndpoint/checkCustomer?firstName=".concat(this.firstName,"&lastName=").concat(this.lastName)).then((function(e){t.customerList=Object(p["a"])(e.data.returned)}))["catch"]((function(t){console.log(t)})):alert("Please fill in a customer first name and last name")},setCustomerInfo:function(t){var e=I.a.find(this.customerList,(function(e){return e.customerId==t}));this.phoneNum=e.phoneNumber,this.email=e.email,this.prescription.leftEyeSphere=e.leftEyeSphere,this.prescription.leftEyeCylinder=e.leftEyeCylinder,this.prescription.leftEyeAxis=e.leftEyeAxis,this.prescription.leftEyeAdd=e.leftEyeAdd,this.prescription.leftEyePrism=e.leftEyePrism,this.prescription.rightEyeSphere=e.rightEyeSphere,this.prescription.rightEyeCylinder=e.rightEyeCylinder,this.prescription.rightEyeAxis=e.rightEyeAxis,this.prescription.rightEyeAdd=e.rightEyeAdd,this.prescription.rightEyePrism=e.rightEyePrism,this.prescription.pd=e.pupilDistance,this.selectedCustomerId=e.customerId},setLensDetails:function(t){var e=this.productIds.lenses[t];if(e){var r=e.productId,s=I.a.find(this.lenses,(function(t){return t.productId===r})),i=s.productPrice,a=s.productName;e.price=i,e.name=a,e.error=null,f.a.get("http://192.168.1.106:8080/server-0.0/restEndpoint/getStoreProducts?storeId=1&productId=".concat(e.productId)).then((function(t){if(1===t.data.returned.length){var r=t.data.returned[0].quantity;e.availableAmt=r}}))["catch"]((function(t){return console.error(t)}))}}}},A=P,N=(r("a844"),Object(o["a"])(A,d,m,!1,null,"a85a2b0e",null)),k=N.exports,q=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",[t._v("Employee page")])},S=[],D={name:"Employees"},$=D,L=Object(o["a"])($,q,S,!1,null,null,null),O=L.exports;s["a"].use(u["a"]);var j=[{path:"/",name:"Home",component:k},{path:"/employees",name:"Employees",component:O}],R=new u["a"]({routes:j}),T=R;r("4989"),r("ab8b");s["a"].config.productionTip=!1,new s["a"]({router:T,render:function(t){return t(c)}}).$mount("#app")},a844:function(t,e,r){"use strict";r("cbd3")},cbd3:function(t,e,r){},dd48:function(t,e,r){}});
//# sourceMappingURL=app.f745fd61.js.map